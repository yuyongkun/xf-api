webpackJsonp([0],{"+0UC":function(t,s,a){"use strict";function n(t){a("jYs4")}var e=a("DIND"),o=a("hRV4"),i=a("C7Lr"),r=n,c=i(e.a,o.a,!1,r,null,null);s.a=c.exports},"+xRT":function(t,s,a){"use strict";var n=a("P9l9"),e=a("wSez"),o=(a.n(e),a("yohg"));s.a={props:["orderId"],name:"Order",data:function(){return{order:{},showStatus:!1,orderTTL:o.b}},methods:{handleWxPay:function(){if(o.a&&Object(e.Toast)("请在微信环境中使用"),this.order.paid)return void this.$toast("订单已经支付，请勿重复支付！");if(Date.now()-this.order.creationTime>=o.b)return void Object(e.Toast)("订单已过期，请重新购买");this.showStatus=!this.showStatus;var t=this.order.signFields,s=t.timeStamp,a=t.nonceStr,i=t.signType,r=this;wx.ready(function(){wx.chooseWXPay({timestamp:s,nonceStr:a,package:t.package,signType:i,paySign:r.order.paySign,success:function(t){var s=this;Object(e.Toast)("支付成功"),r.order.prodId?Object(n.L)(r.order.orderId).then(function(){r.$router.push({name:"MyTicket"})}).catch(function(t){console.error(t),Object(e.Toast)("系统错误："+t.message)}):Object(n.K)(r.order.orderId).then(function(){s.shopId=r.$route.params.shopId,s.apmId=r.$route.params.apmId,r.$router.push({name:"RateForm",params:{shopId:r.order.shopId,apmId:r.order.apmId},query:{state:"rate"}})}).catch(function(t){console.error(t),Object(e.Toast)("系统错误："+t.message)})},fail:function(t){r.$router.push({name:"PayFail"}),Object(e.Toast)("支付失败")}})})}},mounted:function(){var t=this;this.$refs.countdown.start(),o.a||Object(n.j)(this.orderId).then(function(s){Object(e.Toast)("获取订单成功"),t.order=s.data.order,t.orderTTL=o.b-t.order.creationTime}).catch(function(t){console.error(t),Object(e.Toast)("获取订单错误！")})}}},"/DmS":function(t,s,a){"use strict";var n=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"order-view"},[a("div",{staticClass:"product-wrap hairline"},[a("div",{staticClass:"product"},[a("div",{staticClass:"shop-name hairline"},[a("p",[a("i",{staticClass:"fa fa-home"}),t._v(" "+t._s(t.shop.name))])]),t._v(" "),a("div",{staticClass:"detail"},[a("img",{attrs:{src:t.product.photos[0],alt:""}}),t._v(" "),a("div",{staticClass:"desc"},[a("p",{staticClass:"prod-name"},[t._v(t._s(t.product.name))]),t._v(" "),a("p",{staticClass:"prod-desc"},[t._v(t._s(t.product.desc))]),t._v(" "),a("p",{staticClass:"price-count"},[a("span",{staticClass:"price"},[a("span",{staticClass:"symbol"},[t._v("￥")]),t._v(t._s(t.price))]),t._v(" "),a("span",[t._v(" ")]),t._v(" "),a("span",{staticClass:"count"},[t._v("购买数量 "+t._s(t.prodCount))])])])])])]),t._v(" "),t.choosedCoupon?a("div",{staticClass:"chooseCoupon"},[a("mt-popup",{staticStyle:{width:"100%",height:"50%",overflow:"scroll"},attrs:{position:"bottom"},model:{value:t.popupVisible,callback:function(s){t.popupVisible=s},expression:"popupVisible"}},[a("mt-checklist",{staticStyle:{padding:"5px"},attrs:{title:"选择积分（可多选）",align:"right",value:t.couponIds,options:t.coupons},model:{value:t.couponIds,callback:function(s){t.couponIds=s},expression:"couponIds"}}),t._v(" "),a("div",{staticStyle:{"text-align":"center",margin:"10px auto",border:"1px solid #d1d1d1",width:"100px",padding:"10px","border-radius":"10px"},on:{click:t.confirmCoupon}},[t._v("确定")])],1)],1):t._e(),t._v(" "),t.coupons.length?a("div",{staticClass:"coupon-wrap",on:{click:t.showPopup}},[a("mt-cell",{attrs:{title:"积分","is-link":"",value:"¥"+parseFloat(t.choosedCoupon.couponAmount/100).toFixed(2)}})],1):t._e(),t._v(" "),a("div",{staticClass:"order-btn-bar"},[a("div",{staticClass:"btn",on:{click:t.submitOrder}},[t._v("提交订单")]),t._v(" "),a("p",[t._v("需付："),a("span",{staticClass:"order-price"},[t._v("￥"+t._s(t._f("yuan")(t.total)))])])])])},e=[],o={render:n,staticRenderFns:e};s.a=o},"/EY3":function(t,s,a){t.exports=a.p+"static/img/m-fx-1.0d1b25a.png"},"/EYB":function(t,s){},"/NgF":function(t,s,a){"use strict";var n=a("KH7x"),e=a.n(n),o=a("wSez"),i=(a.n(o),a("P9l9")),r=a("0xDb");s.a={name:"Home",data:function(){return{selected:"home",shops:[],user:{},loading:!0}},watch:{selected:function(t,s){}},methods:{redirectToTargetView:function(){var t=Object(r.g)("state");if(t)if(t.startsWith("coupon-share-"))this.$router.push({name:"CouponShare",params:{couponId:t.split("-")[2]||""},query:{state:""}});else if(t.startsWith("pay-msg-"))this.$router.push({name:"PayNotification",query:{state:"",msgId:t.split("-")[2]||""}});else if(t.startsWith("rate-apm-")){var s=t.split("-").slice(2),a=e()(s,2),n=a[0],o=a[1];this.$router.push({name:"RateForm",params:{shopId:n,apmId:o},query:{state:""}})}else if(t.startsWith("bookings"))this.$router.push({name:"MyBooking"});else if(t.startsWith("qrcode-coupon-center-")){var i=t.split("-");this.$router.push({name:"QrcodeCouponCenter",params:{shopId:i[3]},query:{shopId:i[3],couponId:i[4],shareId:i.length>=5?i[5]:""}})}else t.startsWith("coupon-center-")?this.$router.push({name:"CouponCenter",params:{shopId:t.split("-")[2]}}):t.startsWith("my-coupon")?this.$router.push({name:"Coupon"}):"shop-bookings"===t&&this.$router.push({name:"MyBooking"})},listShop:function(t){var s=this;Object(i.E)(t).then(function(t){t.data&&t.data.shops&&(s.shops=t.data.shops),s.loading=!1,s.$indicator.close()}).catch(function(t){console.error(t),Object(o.Toast)("获取商店列表失败"),s.loading=!1,s.$indicator.close()})}},beforeMount:function(){this.redirectToTargetView()},mounted:function(){var t=Object(r.g)("state"),s="home";"shop-home-user"===t&&(s="me"),Object(o.Toast)(s),this.$indicator.open({text:"让发型更出色，让生活更精彩",spinnerType:"fading-circle"});var a=this;!function(){var t=Object(r.g)("code");if(t)console.log("hascode->"+location.href),Object(i.v)(t,function(t){var s=t.data.user.result2;a.user=s});else{console.log("nocode->"+location.href);var s=encodeURIComponent(location.href);location.href="https://open.weixin.qq.com/connect/oauth2/authorize?appid=wxc7ced805a8754132&redirect_uri="+s+"&response_type=code&scope=snsapi_userinfo&state=shop-home-user#wechat_redirect"}}(),this.selected=s}}},"/S2/":function(t,s,a){"use strict";var n=a("P9l9");s.a={name:"",data:function(){return{shopId:this.$route.params.shopId,loading:!1,photos:[]}},methods:{fetchData:function(){var t=this;this.photos=[],this.loading=!0,Object(n.q)(this.shopId).then(function(s){t.$toast("获取数据成功"),t.photos=s.data,t.loading=!1}).catch(function(s){t.loading=!1,t.$toast.error("系统错误")})}},mounted:function(){this.fetchData()}}},"/T9D":function(t,s,a){"use strict";var n=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"container"},[a("section",{staticClass:"fixed_box"},[a("mt-navbar",{staticClass:"page-part",attrs:{fixed:""},model:{value:t.selected,callback:function(s){t.selected=s},expression:"selected"}},[a("mt-tab-item",{attrs:{id:"1"}},[t._v("精选好评")]),t._v(" "),a("mt-tab-item",{attrs:{id:"0"}},[t._v("最新好评")])],1)],1),t._v(" "),a("mt-tab-container",{staticStyle:{height:"100%",overflow:"scroll"},model:{value:t.selected,callback:function(s){t.selected=s},expression:"selected"}},[a("mt-tab-container-item",{attrs:{id:"1"}},[a("rating-list",{staticStyle:{"margin-top":"50px"},attrs:{row:10,shopId:t.shopId,status:2}})],1),t._v(" "),a("mt-tab-container-item",{staticStyle:{height:"100%"},attrs:{id:"0"}},[a("rating-list",{staticStyle:{"margin-top":"50px"},attrs:{row:10,shopId:t.shopId,status:1}})],1)],1)],1)},e=[],o={render:n,staticRenderFns:e};s.a=o},"/qvy":function(t,s,a){"use strict";function n(t){a("/EYB"),a("cuZ5")}var e=a("SBX0"),o=a("i0SR"),i=a("C7Lr"),r=n,c=i(e.a,o.a,!1,r,"data-v-323386bb",null);s.a=c.exports},"/zmW":function(t,s){},"06H/":function(t,s,a){"use strict";var n=a("IHPB"),e=a.n(n),o=a("P9l9"),i=a("2mbd"),r=a.n(i);s.a={name:"RateForm",components:{StarRating:r.a},data:function(){return{readOnly:!1,shopId:"",staffId:"",staff:{},apmId:"",rating:5,comment:"",rate_shopClean:5,rate_shopServe:5,staffs:[]}},mounted:function(){var t=this;this.shopId=this.$route.params.shopId,this.apmId=this.$route.params.apmId,Object(o.f)(this.apmId).then(function(s){t.readOnly=!0,t.rating=s.data.comment.rating,t.rate_shopClean=s.data.comment.rate_shopClean,t.rate_shopServe=s.data.comment.rate_shopServe,t.comment=s.data.comment.comment}),Object(o.e)(this.apmId).then(function(s){if(s.data.staffs){var a;(a=t.staffs).push.apply(a,e()(s.data.staffs))}})},methods:{submit:function(){var t=this,s=[],a=0;if(!this.comment.length)return void this.$toast("请填写您对发型师的评价");this.staffs.length&&(this.staffs.map(function(t){a+=t.rating,s.push({userid:t.userid,rating:t.rating})}),this.rating=parseInt(a/this.staffs.length)),this.$indicator.open(),Object(o.a)({apmId:this.apmId,shopId:this.shopId,rating:this.rating,comment:this.comment,rate_shopClean:this.rate_shopClean,rate_shopServe:this.rate_shopServe,staffs:s}).then(function(s){t.$indicator.close(),t.$router.push({name:"CouponCenter",params:{shopId:t.shopId,lastView:"RateForm"}})}).catch(function(s){t.$toast("提交数据失败"),t.$indicator.close()})}}}},"0mnt":function(t,s,a){"use strict";function n(t){a("38Mp")}var e=a("ua79"),o=a("/DmS"),i=a("C7Lr"),r=n,c=i(e.a,o.a,!1,r,"data-v-5f8589ca",null);s.a=c.exports},"0uqd":function(t,s,a){"use strict";var n=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"scroll_box coupon-list-2"},[t.coupons.length<=0&&!t.loading?a("div",{staticClass:"tips"},[a("i",{staticClass:"iconfont"},[t._v("")]),t._v(" "),a("p",{staticClass:"text"},[t._v("暂无积分券")])]):t._e(),t._v(" "),t._l(t.coupons,function(s,n){return a("div",{key:n,staticClass:"coupon"},[a("div",{staticClass:"coupon-body"},[a("div",{staticClass:"body-left"},[a("h3",[t._v(t._s(s.couponName))]),t._v(" "),a("ul",[a("li",[t._v("满"+t._s(s.orderMinAmount)+"元可用")]),t._v(" "),a("li",[t._v("有效期至"+t._s(t._f("formatDate")(s.endTimeStamp)))])])]),t._v(" "),a("div",{staticClass:"body-right"},[a("div",{staticClass:"money"},[a("span",[t._v("￥")]),a("strong",[t._v(t._s(s.couponAmount))])])])]),t._v(" "),a("div",{staticClass:"coupon-footer"},[a("mt-button",{attrs:{size:"large",type:"primary"},on:{click:function(a){t.getCoupon(s)}}},[t._v("立即领取")])],1)])})],2)},e=[],o={render:n,staticRenderFns:e};s.a=o},"0xDb":function(t,s,a){"use strict";function n(t){switch(t){case"1":return"洗剪";case"2":return"净剪";case"3":return"洗吹";case"4":return"烫染";case"5":return"补差价"}}a.d(s,"d",function(){return r}),a.d(s,"i",function(){return c}),a.d(s,"h",function(){return u}),a.d(s,"e",function(){return d}),a.d(s,"a",function(){return h}),a.d(s,"c",function(){return m}),a.d(s,"g",function(){return f}),a.d(s,"f",function(){return v}),s.b=n;var e=a("rVsN"),o=a.n(e),i=a("P9l9"),r=function(t){function s(t){return t<10?"0"+t:t}if(!t)return{};var a=new Date(t);return{year:a.getFullYear(),month:s(a.getMonth()+1),day:s(a.getDate()),hour:s(a.getHours()),min:s(a.getMinutes()),sec:s(a.getSeconds())}},c=function(t){var s=t.count,a=t.sizeType,n=t.sourceType;return new o.a(function(t,e){wx.chooseImage({count:s,sizeType:a,sourceType:n,success:function(s){t(s.localIds)},fail:function(t){e(t)}})})},u=function t(s){var a=s.localIds,n=s.resultList;return 0===a.length?n:l(a.shift()).then(function(t){return n.push(t),{localIds:a,resultList:n}}).then(t)},l=function(t){return new o.a(function(s,a){wx.uploadImage({localId:t,isShowProgressTips:1,success:function(t){var a=t.serverId;return s(a)},fail:function(){s("")}})})},d=function t(s){var a=s.serverIds,n=s.resultList;return 0===a.length?n:p(a.shift()).then(function(t){return n.push(t),{serverIds:a,resultList:n}}).then(t)},p=function(t){return t?Object(i.w)(t).then(function(t){return t.data.url}):""},h=function(t){return 0==t?"有空":"需等待"+Math.floor(t/60)+"小时"+t%60+"分钟"},m=function(t,s,a){if(!t||!s)return"";if(a=a||"f",t=parseFloat(t,10),s=parseInt(s,10),"f"===a){var n=t.toString().split(".")[0],e=t.toString().split(".")[1]||"00";return e.length<2&&(e+="0"),n+"."+e.substring(0,s)}return t.toFixed(s)},f=function(t){var s=window.location.href;t=t.replace(/[\[\]]/g,"\\$&");var a=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)"),n=a.exec(s);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null},v=function(){return window._openid||f("o")}},"11Pk":function(t,s,a){"use strict";s.a={name:"",props:["users"],data:function(){return{}},methods:{},mounted:function(){}}},"15+l":function(t,s,a){"use strict";var n=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"blank-view"},[a("input-number",{attrs:{min:1,max:10,value:5}})],1)},e=[],o={render:n,staticRenderFns:e};s.a=o},"1h/D":function(t,s,a){"use strict";var n=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"staff-list-view"},[a("div",{staticClass:"list-inner hairline-top"},[a("ul",t._l(t.staffs,function(s){return a("li",{key:s.userid,staticClass:"staff-item hairline-bottom"},[a("div",{staticClass:"media"},[a("div",{staticClass:"media-left"},[a("div",{staticClass:"avatar",attrs:{slot:"icon"},slot:"icon"},[a("img",{attrs:{src:s.photo,alt:"头像"}})])]),t._v(" "),a("div",{staticClass:"media-body"},[a("p",{staticClass:"staff-intro"},[t._v(t._s(s.intro))]),t._v(" "),a("p",{staticClass:"wait-time"},[t._v(t._s(t.formatWaitTime(s.wait)))])]),t._v(" "),a("div",{staticClass:"media-right"},[a("div",{staticClass:"btn-box"},[a("mt-button",{staticClass:"appointment-btn",attrs:{type:"primary",size:"small",disabled:!s.working},on:{click:function(a){t.handleMakeAppointment(s)}}},[t._v(t._s(t.getBtnText(s.working)))])],1)])])])}))])])},e=[],o={render:n,staticRenderFns:e};s.a=o},"1hPO":function(t,s){},"1zNl":function(t,s){},"22XI":function(t,s){},"2kMg":function(t,s,a){t.exports=a.p+"static/img/wm-fx-2.2271449.jpg"},"38Mp":function(t,s){},"3CHL":function(t,s,a){"use strict";var n=a("wSez"),e=(a.n(n),a("P9l9")),o=a("AO9w"),i=a("qxLr"),r=a("2mbd"),c=a.n(r);s.a={name:"Shop",components:{StaffList:o.a,StarRating:c.a,RatingList:i.a},data:function(){return{shop:{},banners:[],categoryGroup1:[],categoryGroup2:[],shopId:this.$route.params.id,xjCate:"1",jjCate:"2",xcCate:"3",trCate:"4",cjCate:"5",cjProd:{prodId:"a"},dialogVisible:!1,shopRating:{score:0,count:"",percent:""},entries:[],featuredRatings:[],latestRatings:[],selectedCommentList:"1"}},methods:{getCJProductInfo:function(){var t=this;Object(e.D)(this.shopId,this.cjCate).then(function(s){var a=s.data.groups;if(!(a.length<1)){var n=a[0].products;n.length<1||(t.cjProd=n[0],console.log(t.cjProd))}})},showDialog:function(){this.dialogVisible=!0},closeDialog:function(){this.dialogVisible=!1},getEntryConfig:function(){var t=this;Object(e.p)(this.shopId).then(function(s){t.entries=s.data})}},mounted:function(){var t=this,s=this.$route.params.id;this.shopId=s,Object(e.o)(s).then(function(s){return t.shop=s.data.shop,t.shop.banners=[{img:t.shop.photo,link:""}],Object(e.y)()}).then(function(s){var a=s.data.categories;return t.categoryGroup1=a.slice(0,3),t.categoryGroup2=a.slice(3),t.getCJProductInfo()}).then(function(){return t.getEntryConfig()}).catch(function(t){console.error(t),Object(n.Toast)("系统错误: "+t.message)}),Object(e.z)(this.shopId,1,2,1).then(function(s){s.count&&(t.shopRating.score=s.score,t.shopRating.count=s.count,t.shopRating.percent=s.percent,t.latestRatings=s.comments)}),Object(e.z)(this.shopId,1,2,2).then(function(s){s.count&&(t.featuredRatings=s.comments)})}}},"3LGd":function(t,s,a){"use strict";var n=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"container"},[a("div",{staticClass:"shopRating"},[a("p",{staticClass:"sub vux-1px-b"},[t._v("以下发型师参与了这次服务，请给他们一个中肯的评价吧")]),t._v(" "),a("h4",{staticClass:"h4"},[t._v("评价服务")]),t._v(" "),t._l(t.staffs,function(s,n){return t.staffs.length?a("div",{key:n,staticClass:"rateCate"},[a("span",{staticClass:"staffAvatar"},[a("img",{staticClass:"avatar",attrs:{src:s.photo,alt:"头像"}})]),t._v(" "),a("star-rating",{attrs:{"star-size":30,"read-only":t.readOnly,"show-rating":!1},model:{value:s.rating,callback:function(a){t.$set(s,"rating",a)},expression:"item.rating"}}),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:5===s.rating,expression:"item.rating === 5"}]},[t._v("非常满意")]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:4===s.rating,expression:"item.rating === 4"}]},[t._v("比较满意")]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:3===s.rating,expression:"item.rating === 3"}]},[t._v("满意")]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:2===s.rating,expression:"item.rating === 2"}]},[t._v("不满意")]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:1===s.rating,expression:"item.rating === 1"}]},[t._v("非常不满意")])],1):t._e()}),t._v(" "),a("h4",{staticClass:"h4"},[t._v("店务整洁")]),t._v(" "),a("div",{staticClass:"rateCate"},[a("star-rating",{attrs:{"star-size":30,"read-only":t.readOnly,"show-rating":!1},model:{value:t.rate_shopClean,callback:function(s){t.rate_shopClean=s},expression:"rate_shopClean"}})],1),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.comment,expression:"comment"}],staticClass:"textarea",attrs:{maxlength:"80",rows:"6",readonly:t.readOnly,placeholder:"发型师的手艺如何，服务如何，门店环境如何。写下您的评价，会让发型师做得更好"},domProps:{value:t.comment},on:{input:function(s){s.target.composing||(t.comment=s.target.value)}}}),t._v(" "),a("mt-button",{attrs:{type:"primary",size:"normal",disabled:t.readOnly},on:{click:t.submit}},[t._v(t._s(t.readOnly?"已评价":"提交并领取积分"))])],2)])},e=[],o={render:n,staticRenderFns:e};s.a=o},"3eyk":function(t,s,a){"use strict";function n(t){a("hpJz")}var e=a("gnn+"),o=a("VlSd"),i=a("C7Lr"),r=n,c=i(e.a,o.a,!1,r,null,null);s.a=c.exports},"3iZw":function(t,s,a){"use strict";var n=function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"coupon-center-view page"},[n("div",{staticClass:"shop-view-banner"},[t.shop.photo2?n("div",{staticClass:"banner-box"},[n("img",{staticClass:"shop-img",attrs:{src:t.shop.photo2,alt:"门店图片"}})]):t._e(),t._v(" "),n("div",{staticClass:"shop-detail hairline"},[n("h3",[t._v(t._s(t.shop.name))]),t._v(" "),n("p",[t._v("营业时间："+t._s(t.shop.bizTime))])]),t._v(" "),n("div",{staticClass:"shop-address"},[n("p",[t._v(t._s(t.shop.address))])])]),t._v(" "),n("coupon-list2",{attrs:{coupons:t.coupons,loading:t.couponLoading},on:{getCoupon:t.handleGetCoupon}}),t._v(" "),n("coupon-user-list",{attrs:{users:t.users}}),t._v(" "),n("section",{staticStyle:{height:"52px"}},[n("mt-navbar",{staticClass:"page-part",model:{value:t.selectedCommentList,callback:function(s){t.selectedCommentList=s},expression:"selectedCommentList"}},[n("mt-tab-item",{attrs:{id:"1"}},[t._v("精选")]),t._v(" "),n("mt-tab-item",{attrs:{id:"2"}},[t._v("最新")])],1)],1),t._v(" "),n("mt-tab-container",{model:{value:t.selectedCommentList,callback:function(s){t.selectedCommentList=s},expression:"selectedCommentList"}},[n("mt-tab-container-item",{attrs:{id:"1"}},[n("rating-list",{attrs:{row:2,status:2,shopId:t.shopId,loadonce:""}})],1),t._v(" "),n("mt-tab-container-item",{attrs:{id:"2"}},[n("rating-list",{attrs:{row:2,status:1,shopId:t.shopId,loadonce:""}})],1)],1),t._v(" "),n("router-link",{attrs:{to:{name:"Ratings",params:{shopId:t.shopId}}}},[n("mt-button",{attrs:{type:"default",size:"large"}},[t._v("查看更多评论")])],1),t._v(" "),n("h3",[t._v("男生发型")]),t._v(" "),n("mt-swipe",{attrs:{auto:4e3}},[n("mt-swipe-item",[n("div",{staticClass:"slide"},[n("div",{staticClass:"slide-content"},[n("img",{attrs:{src:a("/EY3")}})])])]),t._v(" "),n("mt-swipe-item",[n("div",{staticClass:"slide"},[n("div",{staticClass:"slide-content"},[n("img",{attrs:{src:a("tuqB")}})])])]),t._v(" "),n("mt-swipe-item",[n("div",{staticClass:"slide"},[n("div",{staticClass:"slide-content"},[n("img",{attrs:{src:a("g+7g")}})])])])],1),t._v(" "),n("h3",[t._v("女生发型")]),t._v(" "),n("mt-swipe",{attrs:{auto:4e3}},[n("mt-swipe-item",[n("div",{staticClass:"slide"},[n("div",{staticClass:"slide-content"},[n("img",{attrs:{src:a("zSz4")}})])])]),t._v(" "),n("mt-swipe-item",[n("div",{staticClass:"slide"},[n("div",{staticClass:"slide-content"},[n("img",{attrs:{src:a("2kMg")}})])])]),t._v(" "),n("mt-swipe-item",[n("div",{staticClass:"slide"},[n("div",{staticClass:"slide-content"},[n("img",{attrs:{src:a("DxLK")}})])])])],1),t._v(" "),n("router-link",{staticClass:"link-btn",attrs:{to:{name:"Home"}}},[n("mt-button",{attrs:{size:"large"}},[t._v("个人中心")])],1),t._v(" "),n("section",{directives:[{name:"show",rawName:"v-show",value:t.showMask,expression:"showMask"}],staticClass:"mask",attrs:{id:"mask"},on:{click:function(s){t.showMask=!1}}},[n("img",{staticStyle:{width:"375px",height:"365px",position:"absolute",right:"10px"},attrs:{src:a("u1zd")}})])],1)},e=[],o={render:n,staticRenderFns:e};s.a=o},"40jM":function(t,s){},"4rA0":function(t,s,a){"use strict";var n=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"booking-view"},[a("section",{staticClass:"fixed_box"},[a("mt-navbar",{staticClass:"page-part",attrs:{fixed:""},model:{value:t.selected,callback:function(s){t.selected=s},expression:"selected"}},[a("mt-tab-item",{attrs:{id:"1"}},[t._v("待消费")]),t._v(" "),a("mt-tab-item",{attrs:{id:"2"}},[t._v("服务中")]),t._v(" "),a("mt-tab-item",{attrs:{id:"3"}},[t._v("已完成")]),t._v(" "),a("mt-tab-item",{attrs:{id:"4"}},[t._v("已取消")])],1)],1),t._v(" "),a("mt-tab-container",{model:{value:t.selected,callback:function(s){t.selected=s},expression:"selected"}},[a("mt-tab-container-item",{attrs:{id:"1"}},[a("booking-list",{attrs:{bookings:t.waitingBookings},on:{updateBookingList:t.fetchData}})],1),t._v(" "),a("mt-tab-container-item",{attrs:{id:"2"}},[a("booking-list",{attrs:{bookings:t.servingBookings},on:{updateBookingList:t.fetchData}})],1),t._v(" "),a("mt-tab-container-item",{attrs:{id:"3"}},[a("booking-list",{attrs:{bookings:t.doneBookings},on:{updateBookingList:t.fetchData}}),t._v(" "),a("mt-button",{directives:[{name:"show",rawName:"v-show",value:!t.doneBookingListEnd,expression:"!doneBookingListEnd"}],attrs:{size:"large",type:"default",plain:""},on:{click:t.loadMoreDoneBookings}},[t._v("加载更多")])],1),t._v(" "),a("mt-tab-container-item",{attrs:{id:"4"}},[a("booking-list",{attrs:{bookings:t.cancelBookings},on:{updateBookingList:t.fetchData}}),t._v(" "),a("mt-button",{directives:[{name:"show",rawName:"v-show",value:!t.cancelBookingListEnd,expression:"!cancelBookingListEnd"}],attrs:{size:"large",type:"default",plain:""},on:{click:t.loadMoreCancelBookings}},[t._v("加载更多")])],1)],1)],1)},e=[],o={render:n,staticRenderFns:e};s.a=o},"4yUA":function(t,s,a){"use strict";function n(t){a("sSRv")}var e=a("/S2/"),o=a("aF8s"),i=a("C7Lr"),r=n,c=i(e.a,o.a,!1,r,null,null);s.a=c.exports},"5OHe":function(t,s){},"5VQ+":function(t,s,a){"use strict";var n=a("P9l9"),e=a("0xDb");s.a={name:"StaffList",props:["shopId","category"],data:function(){return{staffs:[]}},methods:{fetchData:function(){var t=this;Object(n.F)(this.shopId).then(function(s){t.staffs=s.data.staffs}).catch(function(t){console.error(t)})},handleMakeAppointment:function(t){var s=this;t.working&&this.$messagebox({message:"请安排好时间到店，如过号需重新取号",showCancelButton:!0,confirmButtonText:"确定取号",cancelButtonText:"取消"}).then(function(){return Object(n.J)(s.shopId,t.userid,window._openid)}).then(function(){s.$toast("成功预约")}).catch(function(t){console.error(t),t.message.indexOf("409")>0?s.$toast("你已预约，请勿重复取号"):s.$toast("预约失败。请稍后重试："+t.message)})},getBtnText:function(t){return t?"一键取号":"下班了"},formatWaitTime:function(t){return Object(e.a)(t)}},mounted:function(){console.log(this.shopId),this.fetchData()}}},"5Vwv":function(t,s,a){"use strict";var n=a("wSez"),e=(a.n(n),a("P9l9"));s.a={name:"Product",computed:{navBtnTxt:function(){return"1"===this.category?"去更优惠的净剪看看":"去更便于剪发的洗剪看看"}},data:function(){return{product:{},shop:{},shopCollapse:!0,activeOption:!1,buyCount:1,shopId:this.$route.params.shopId,category:this.$route.query.cateId,staffId:this.$route.query.staffId,prodId:this.$route.params.prodId}},methods:{toggleOption:function(t){this.activeOption!==t&&(this.activeOption=t)},handleBuyBtn:function(){if(!1===this.activeOption)return void Object(n.Toast)("请选择购买规格");var t=this.product.countOption[this.activeOption];this.$router.push({name:"Order",params:{shopId:this.$route.params.shopId,prodId:this.product.prodId},query:{count:t.count*this.buyCount,price:t.price}})},getProductInfo:function(){var t=this,s=this.$route.params.prodId;1===this.prodId.length?Object(e.m)(this.shopId,this.prodId).then(function(s){var a=s.data.product;t.product=a,t.shop=a.shop,t.staffId&&Object(e.t)(t.shopId,t.staffId).then(function(s){var n=s.data.options,e=n[a.category];t.product.countOption=e,1===e.length&&(t.activeOption=0)})}).catch(function(t){console.error(t),Object(n.Toast)("系统错误："+t.message)}):Object(e.n)(s).then(function(s){var a=s.data.product;t.product=a,t.shop=a.shop}).catch(function(t){console.error(t),Object(n.Toast)("系统错误："+t.message)})}},mounted:function(){this.getProductInfo()}}},"6xLw":function(t,s){},"7GlQ":function(t,s,a){"use strict";var n=a("qxLr");s.a={name:"Ratings",components:{RatingList:n.a},data:function(){return{selected:"1",page:1,ratings:[],selectedratings:[],loading:!1,shopId:this.$route.params.shopId,staffId:this.$route.params.staffId}},methods:{},created:function(){this.shopId=this.$route.params.shopId}}},"81Lj":function(t,s,a){t.exports=a.p+"static/img/shop-banner.e87e37a.jpg"},"8Krd":function(t,s,a){"use strict";function n(t){a("1zNl")}var e=a("NHqc"),o=a("GsEE"),i=a("C7Lr"),r=n,c=i(e.a,o.a,!1,r,null,null);s.a=c.exports},"8c4J":function(t,s,a){"use strict";var n=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"myticket-view"},[a("mt-navbar",{staticClass:"page-part",attrs:{fixed:""},model:{value:t.selected,callback:function(s){t.selected=s},expression:"selected"}},[a("mt-tab-item",{attrs:{id:"1"}},[t._v("待消费")]),t._v(" "),a("mt-tab-item",{attrs:{id:"2"}},[t._v("已使用")])],1),t._v(" "),a("mt-tab-container",{staticClass:"tab-content",model:{value:t.selected,callback:function(s){t.selected=s},expression:"selected"}},[a("mt-tab-container-item",{attrs:{id:"1"}},[a("ticket-list",{attrs:{tickets:t.unusedTickets}})],1),t._v(" "),a("mt-tab-container-item",{attrs:{id:"2"}},[a("ticket-list",{attrs:{tickets:t.usedTickets}})],1)],1)],1)},e=[],o={render:n,staticRenderFns:e};s.a=o},"9TuS":function(t,s){},"9aav":function(t,s,a){"use strict";function n(t){a("tXCO")}var e=a("o1hr"),o=a("pW5D"),i=a("C7Lr"),r=n,c=i(e.a,o.a,!1,r,"data-v-75458e96",null);s.a=c.exports},"9zZn":function(t,s,a){"use strict";function n(t){a("LBD6"),a("d6hU")}var e=a("nrUV"),o=a("swE8"),i=a("C7Lr"),r=n,c=i(e.a,o.a,!1,r,"data-v-035d4c91",null);s.a=c.exports},AO9w:function(t,s,a){"use strict";function n(t){a("qiJ6")}var e=a("5VQ+"),o=a("1h/D"),i=a("C7Lr"),r=n,c=i(e.a,o.a,!1,r,null,null);s.a=c.exports},BbNH:function(t,s){},CC1u:function(t,s){},CDeA:function(t,s,a){"use strict";var n=a("IHPB"),e=a.n(n),o=a("2mbd"),i=a.n(o),r=a("P9l9");s.a={name:"RatingList",data:function(){return{page:1,loading:!1,ratings:[]}},components:{StarRating:i.a},props:{row:{type:Number,default:function(){return 10}},status:{type:Number,default:function(){return 1}},shopId:{type:String,default:function(){return""}},data:{type:Array,default:function(){return[]}},loadonce:{type:Boolean,default:function(){return!1}},filterStaffId:{type:String,default:function(){return""}}},watch:{data:function(t,s){this.ratings=t}},methods:{loadMore:function(){var t=this;if(this.loading||this.data.length||!this.shopId)return void console.log("not going to fetch data, this.loading: %s, this.data: %j, this.shopId: %s",this.loading,this.data,this.shopId);this.loading=!0,Object(r.z)(this.shopId,this.page,this.row,this.status).then(function(s){t.page++;var a=s.comments;if(t.filterStaffId&&(a=a.filter(function(s){return s.staffs.map(function(t){return t.userid}).includes(t.filterStaffId)})),t.ratings=[].concat(e()(t.ratings),e()(a)),s.comments.length<t.row)return void(t.loading=!0);t.loading=!1})}},computed:{scrollDisabled:function(){return this.loading||this.loadonce}},mounted:function(){console.log("rating list init data ====",this.data),this.data.length?this.ratings=this.data:this.loadMore()}}},"Ce/F":function(t,s){},D7SL:function(t,s,a){"use strict";function n(t){a("Tzim")}var e=a("YdIN"),o=a("eL5M"),i=a("C7Lr"),r=n,c=i(e.a,o.a,!1,r,"data-v-3046c970",null);s.a=c.exports},DIND:function(t,s,a){"use strict";var n=a("lC5x"),e=a.n(n),o=a("J0Oq"),i=a.n(o),r=a("qxLr"),c=a("P9l9");s.a={name:"Blank",components:{RatingList:r.a},data:function(){return{staffId:this.$route.params.staffId,shopId:this.$route.params.shopId,category:this.$route.query.category,staff:{},commentStats:{star1:0,star2:0,star3:0,star4:0,star5:0,rateCount:0,score:5},jobs:[],works:[],videos:[],ratings:[],photoPopupVisible:!1,popupPhotos:[]}},methods:{getStaffData:function(){var t=this;return i()(e.a.mark(function s(){var a,n,o,i,r,u,l;return e.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,Object(c.r)(t.staffId,t.category);case 2:return a=s.sent,n=a.data.staff,o=n.personalData,i=o.jobs,r=o.works,u=o.videos,t.jobs=i,t.works=r,t.videos=u,n.title=n.nickname+" - "+n.intro,t.staff=n,s.next=12,Object(c.s)(t.staffId);case 12:a=s.sent,l=a.data.stats,l.goodRatePercent=(100*(l.star5+l.star4)/l.rateCount).toFixed(2)+"%",t.commentStats=l;case 16:case"end":return s.stop()}},s,t)}))()},showPhotoPopup:function(t){var s=this;return i()(e.a.mark(function a(){return e.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:s.popupPhotos=s.works[t].photos,s.photoPopupVisible=!0;case 2:case"end":return a.stop()}},a,s)}))()},handleMakeAppointment:function(){var t=this,s=this.staff;this.$messagebox({title:"确定取号？",message:'<h1 style="color:#ff5000">¥'+s.price+'</h1><p style="margin:0;">当前服务发型师最低价格</p>如过号需重新取号, 请安排好时间到店',showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(a){if("cancel"!==a)return Object(c.J)(t.shopId,s.userid,t.cateId).then(function(){return t.$messagebox({title:"取号成功",message:'<p style="margin: 0;">亲，出门消费前先取号，后根据收到的进度消息提前到店更合理哦，避免到店取号时才发现前面已等候多人。</p><p style="margin:0;">让美发减少等待<br>从提前取号开始</p>理发后请发型师将发型照片存到个人中心，消费后请对本次服务评价并领取积分优惠券',showCancelButton:!0,confirmButtonText:"我知道了",cancelButtonText:"去看看发型"})}).then(function(){if("cancel"===a)return void(window.location.href="http://www.fanxify.com/app/index.php?i=3&c=entry&m=ewei_shopv2&do=mobile&r=diypage&id=39");t.$router.push({name:"MyBooking"})})}).catch(function(s){console.error(s),s.message.indexOf("409")>0?t.$toast("你已预约，请勿重复取号"):t.$toast("预约失败。请稍后重试："+s.message)})}},mounted:function(){this.getStaffData()}}},DlVV:function(t,s,a){"use strict";var n=a("P9l9");s.a={name:"MyOrder",data:function(){return{listEmpty:!1,orders:[]}},mounted:function(){var t=this,s=window._openid;Object(n.B)(s).then(function(s){var a=s.data.orders;t.listEmpty=0===a.length,t.orders=a}).catch(function(s){console.error(s),t.$toast("获取订单失败"),t.listEmpty=!0})}}},DrO4:function(t,s,a){"use strict";function n(t){a("Rxk8")}var e=a("W6oo"),o=a("wGUj"),i=a("C7Lr"),r=n,c=i(e.a,o.a,!1,r,null,null);s.a=c.exports},DxLK:function(t,s,a){t.exports=a.p+"static/img/wm-fx-3.eba3879.jpg"},"E8/i":function(t,s,a){"use strict";function n(t){a("Wzps")}var e=a("LfFz"),o=a("psZ0"),i=a("C7Lr"),r=n,c=i(e.a,o.a,!1,r,null,null);s.a=c.exports},FqxC:function(t,s,a){"use strict";function n(t){a("Tzrz")}var e=a("I22m"),o=a("wX5r"),i=a("C7Lr"),r=n,c=i(e.a,o.a,!1,r,"data-v-47e973b2",null);s.a=c.exports},GO2A:function(t,s,a){"use strict";function n(t){a("RyoK")}var e=a("OTD4"),o=a("0uqd"),i=a("C7Lr"),r=n,c=i(e.a,o.a,!1,r,"data-v-525a709a",null);s.a=c.exports},Gp83:function(t,s,a){"use strict";var n=function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"page"},[t._m(0),t._v(" "),n("div",{staticClass:"couponContainer"},[n("div",{staticClass:"infoBar"},[t._v("\n      分享给朋友完成领取\n    ")]),t._v(" "),t.coupon.couponId?n("div",{staticClass:"coupon"},[n("div",{staticClass:"topDot"}),t._v(" "),n("div",{staticClass:"bottomDot"}),t._v(" "),n("div",{staticClass:"left"},[n("span",[t._v("￥")]),n("strong",[t._v(t._s(t.coupon.couponAmount))])]),t._v(" "),n("div",{staticClass:"right"},[n("p",[t._v(t._s(t.coupon.couponName))]),t._v(" "),n("ul",[n("li",[t._v("满"+t._s(t.coupon.orderMinAmount)+"元可用")]),t._v(" "),n("li",[t._v("有效期至"+t._s(t._f("formatDate")(t.coupon.endTimeStamp,"{y}-{m}-{d}")))])])])]):t._e()]),t._v(" "),n("div",{staticClass:"bottom-button"},[t.coupon.isReceived?t._e():n("mt-button",{attrs:{type:"danger",size:"large"},on:{click:t.showTips}},[t._v("立即领取")]),t._v(" "),t.coupon.isReceived?n("mt-button",{attrs:{type:"danger",size:"large"},on:{click:t.goHome}},[t._v("立即使用")]):t._e()],1),t._v(" "),n("div",[n("rating-list",{attrs:{data:t.ratings}})],1),t._v(" "),n("section",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"mask",attrs:{id:"mask"},on:{click:function(s){t.show=!1}}},[n("img",{staticStyle:{width:"165px",height:"114px",position:"absolute",right:"10px"},attrs:{src:a("Rzs6")}})])])},e=[function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"banner"},[n("img",{attrs:{src:a("81Lj"),alt:""}})])}],o={render:n,staticRenderFns:e};s.a=o},GsEE:function(t,s,a){"use strict";var n=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"hairphoto-view"},[a("div",{staticClass:"hair-photo-list"},[a("ul",t._l(t.hairPhotos,function(s,n){return a("li",{key:n},[a("div",{staticClass:"hair-photo-item",on:{click:function(a){t.previewHairPhoto(s,t.hairPhotos)}}},[a("img",{attrs:{src:s,alt:"发型照片"}})]),t._v(" "),a("mt-button",{staticClass:"delete-btn",attrs:{type:"danger",size:"small"},on:{click:function(s){t.deleteHairPhoto(n,t.user)}}},[a("i",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])],1)}))]),t._v(" "),a("div",{staticClass:"btn-wrap"},[a("mt-button",{attrs:{size:"large",disabled:t.hairPhotos.length>=6},on:{click:t.handleAddImage}},[t._v("\n      添加照片\n    ")])],1)])},e=[],o={render:n,staticRenderFns:e};s.a=o},"H/op":function(t,s){},"HBr/":function(t,s,a){"use strict";function n(t){a("TzSv")}var e=a("kqL2"),o=a("Gp83"),i=a("C7Lr"),r=n,c=i(e.a,o.a,!1,r,"data-v-7cb945d2",null);s.a=c.exports},HPw3:function(t,s){},I22m:function(t,s,a){"use strict";var n=a("P9l9");s.a={name:"ProductGroup",data:function(){return{prodGroups:[],activeGroups:[]}},methods:{fetchData:function(){},handleCollapse:function(){}},mounted:function(){var t=this,s=this.$route.params.shopId,a=this.$route.params.cateId;Object(n.D)(s,a).then(function(s){t.prodGroups=s.data.groups,t.prodGroups.forEach(function(s){s.expand&&t.activeGroups.push(s.groupId)}),console.log(s)}).catch(function(s){console.error(s),t.$toast("系统错误: "+s.message)})}}},JPb8:function(t,s,a){"use strict";var n=a("lC5x"),e=a.n(n),o=a("J0Oq"),i=a.n(o),r=a("HzJ8"),c=a.n(r),u=a("GO2A"),l=a("P9l9"),d=a("qxLr"),p=a("fBgl");s.a={name:"CouponCenter",components:{CouponList2:u.a,RatingList:d.a,CouponUserList:p.a},data:function(){return{shopId:this.$route.query.shopId,couponId:this.$route.query.couponId,shareId:this.$route.query.shareId,coupons:[],userCoupons:[],ratings:[],users:[],currentCoupon:{},showMask:!1,selectedCommentList:"1"}},methods:{listCoupon:function(){var t=this;Object(l.I)().then(function(s){return t.userCoupons=s.data.coupons||[],Object(l.g)(t.couponId)}).then(function(s){t.coupons.push(s.data.coupon)}).catch(function(s){t.$toast("系统错误："+s.message)})},wxShare:function(){var t=this,s="http://test-shop.fanxify.com/shop-home#/redirect?view=coupon-center&shopId="+t.shopId+"&shareId=1",a="http://test-shop.fanxify.com/static/img/share-logo.jpeg";wx.ready(function(){wx.onMenuShareTimeline({title:"赞！你我身边超级好评美发店，来免费领取积分",link:s,imgUrl:a,success:function(){t.showMask=!1,t.addCoupon(),t.$toast("分享成功")},cancel:function(){t.showMask=!1}}),wx.onMenuShareAppMessage({title:"赞！你我身边超级好评美发店，来免费领取积分",desc:"众多品质客户推荐，看看有没适合我的发型",link:s,imgUrl:a,success:function(){t.showMask=!1,t.addCoupon(),t.$toast("分享成功")},cancel:function(s){t.showMask=!1}})}),wx.error(function(t){})},handleGetCoupon:function(t){if(t){var s=!0,a=!1,n=void 0;try{for(var e,o=c()(this.userCoupons);!(s=(e=o.next()).done);s=!0){if(e.value.couponId===t.couponId)return void this.$toast("你已经领用过该券，请不要重复领用")}}catch(t){a=!0,n=t}finally{try{!s&&o.return&&o.return()}finally{if(a)throw n}}this.currentCoupon=t,this.showMask=!0}},listCouponUser:function(){var t=this;return i()(e.a.mark(function s(){var a;return e.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,Object(l.H)(t.couponId);case 2:a=s.sent.data.users,a=a.slice(0,15),t.users=a;case 5:case"end":return s.stop()}},s,t)}))()},addCoupon:function(){var t=this;Object(l.b)(this.currentCoupon.couponId).then(function(s){t.$toast("领券成功！你可以在个人中心查看你的积分，下单的时候可以使用哦！")}).catch(function(s){409===s.response.status?t.$toast("积分已经领完了"):403===s.response.status?t.$toast("你已经领过该积分，还没使用哦"):t.$toast("积分不存在")})}},mounted:function(){this.listCoupon(),this.listCouponUser(),this.wxShare()}}},KX3k:function(t,s,a){"use strict";var n=a("IHPB"),e=a.n(n),o=a("lC5x"),i=a.n(o),r=a("J0Oq"),c=a.n(r),u=a("P9l9"),l=a("D7SL"),d=a("y0Je");s.a={name:"MyBooking",components:{BookingList:l.a},data:function(){return{selected:"1",bookings:[],allLoaded:!1,servingBookings:[],waitingBookings:[],doneBookings:[],cancelBookings:[],loadDoneBookingOffset:0,loadCancelBookingOffset:0,doneBookingListEnd:!1,cancelBookingListEnd:!1}},methods:{fetchData:function(){var t=this;return c()(i.a.mark(function s(){return i.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return t.$indicator.open(),setTimeout(function(){t.$indicator.close()},1500),t.loadDoneBookingOffset=0,t.loadCancelBookingOffset=0,t.doneBookingListEnd=!1,t.cancelBookingListEnd=!1,s.prev=6,s.next=9,t.loadBookings(d.a.WAITING,"waitingBookings");case 9:return s.next=11,t.loadBookings(d.a.SERVING,"servingBookings");case 11:return s.next=13,t.loadBookings(d.a.DONE,"doneBookings");case 13:return s.next=15,t.loadBookings(d.a.CANCEL,"cancelBookings");case 15:s.next=21;break;case 17:s.prev=17,s.t0=s.catch(6),console.log(s.t0),t.$toast("系统错误");case 21:case"end":return s.stop()}},s,t,[[6,17]])}))()},loadMoreDoneBookings:function(){var t=this;return c()(i.a.mark(function s(){var a,n,o;return i.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return t.loadDoneBookingOffset+=10,s.next=3,Object(u.x)(status,t.loadDoneBookingOffset,10);case 3:n=s.sent,console.log("loadMoreDoneBookings: %j",n),o=n.data.bookings||[],t.doneBookingListEnd=t.bookings.length<10,(a=t.doneBookings).push.apply(a,e()(o));case 8:case"end":return s.stop()}},s,t)}))()},loadMoreCancelBookings:function(){var t=this;return c()(i.a.mark(function s(){var a,n,o;return i.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return t.loadCancelBookingOffset+=10,s.next=3,Object(u.x)(status,t.loadCancelBookingOffset,10);case 3:n=s.sent,o=n.data.bookings||[],t.cancelBookingListEnd=t.bookings.length<10,(a=t.cancelBookings).push.apply(a,e()(o));case 7:case"end":return s.stop()}},s,t)}))()},loadBookings:function(t,s){var a=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;return c()(i.a.mark(function o(){var r;return i.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Object(u.x)(t,n,e);case 2:r=o.sent,console.log("loadBookings resp: %j",r),a[s]=r.data.bookings;case 5:case"end":return o.stop()}},o,a)}))()}},mounted:function(){this.fetchData()}}},LBD6:function(t,s){},LUG1:function(t,s,a){"use strict";s.a={name:"Blank"}},LfFz:function(t,s,a){"use strict";var n=a("0xDb");s.a={name:"",data:function(){return{}},methods:{},beforeMount:function(){var t=Object(n.g)("view"),s=void 0;switch(t){case"coupon-center":s="https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx546482739ca755c0&redirect_uri=http%3A%2F%2Ftest-shop.fanxify.com%2Fauth%2Fshop&response_type=code&scope=snsapi_userinfo&state=coupon-center-"+Object(n.g)("shopId")+"-"+Object(n.g)("shareId")+"#wechat_redirect",window.location.replace(s);break;case"qrcode-coupon-center":var a=Object(n.g)("shopId"),e=Object(n.g)("couponId"),o=Object(n.g)("shareId");s="https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx546482739ca755c0&redirect_uri=http%3A%2F%2Ftest-shop.fanxify.com%2Fauth%2Fshop&response_type=code&scope=snsapi_userinfo&state=qrcode-coupon-center-"+(o?a+"-"+e+"-"+o:a+"-"+e)+"#wechat_redirect",window.location.replace(s);break;default:s="http://test-shop.fanxify.com/#/",window.location.replace(s)}},mounted:function(){}}},LicG:function(t,s){},M93x:function(t,s,a){"use strict";function n(t){a("/zmW")}var e=a("sEFh"),o=a("S9Ze"),i=a("C7Lr"),r=n,c=i(e.a,o.a,!1,r,null,null);s.a=c.exports},N3Zs:function(t,s,a){"use strict";var n=a("wSez"),e=(a.n(n),a("P9l9")),o=a("kOTt");s.a={name:"Staffs",components:{StaffQueue:o.a},data:function(){return{shop:{},shopId:this.$route.params.shopId,cateId:this.$route.params.cateId,dialogVisible:!1}},methods:{showDialog:function(){this.dialogVisible=!0},closeDialog:function(){this.dialogVisible=!1}},mounted:function(){var t=this;Object(e.o)(this.shopId).then(function(s){return t.shop=s.data.shop,t.shop.banners=[{img:t.shop.photo,link:""}],Object(e.y)()}).then(function(t){}).catch(function(t){console.error(t),Object(n.Toast)("系统错误")})}}},NHnr:function(t,s,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var n=a("hRKE"),e=a.n(n),o=a("uugx"),i=(a.n(o),a("QnDV")),r=a.n(i),c=a("T6rV"),u=(a.n(c),a("4mEG")),l=a.n(u),d=a("c2Eo"),p=(a.n(d),a("G4nV")),h=a.n(p),m=a("UtVB"),f=(a.n(m),a("16oH")),v=a.n(f),g=a("6xLw"),_=(a.n(g),a("VDRN")),C=a.n(_),w=a("rxwI"),b=(a.n(w),a("eytz")),I=a.n(b),k=a("Oehy"),B=(a.n(k),a("Ce/F")),y=(a.n(B),a("m/03")),x=a.n(y),Q=a("IvJb"),T=a("wSez"),O=a.n(T),j=a("5OHe"),A=(a.n(j),a("LicG")),R=(a.n(A),a("H/op")),L=(a.n(R),a("r8Ts")),S=(a.n(L),a("Cxjp")),E=a.n(S),D=a("M93x"),F=a("YaEn"),N=a("0xDb");Object(N.g)("state");Q.default.use(O.a),Q.default.component("countdown",E.a),Q.default.component(x.a.name,x.a),Q.default.component(I.a.name,I.a),Q.default.component(C.a.name,C.a),Q.default.component(v.a.name,v.a),Q.default.component(h.a.name,h.a),Q.default.component(l.a.name,l.a),Q.default.component(r.a.name,r.a),Q.default.config.productionTip=!1,Q.default.filter("yuan",function(t){return t?(t=Number(t),isNaN(t)?0:accounting.formatNumber(t/100,2)):"0"}),Q.default.filter("date",function(t){if(!t)return"";var s=Object(N.d)(t);return s.year+"-"+s.month+"-"+s.day}),Q.default.filter("formatDate",function(t,s){if(0===arguments.length)return null;10===(t+"").length&&(t=1e3*+t);var a=s||"{y}-{m}-{d} {h}:{i}:{s}",n=void 0;n="object"==(void 0===t?"undefined":e()(t))?t:new Date(parseInt(t));var o={y:n.getFullYear(),m:n.getMonth()+1,d:n.getDate(),h:n.getHours(),i:n.getMinutes(),s:n.getSeconds(),a:n.getDay()};return a.replace(/{(y|m|d|h|i|s|a)+}/g,function(t,s){var a=o[s];return"a"===s?["一","二","三","四","五","六","日"][a-1]:(t.length>0&&a<10&&(a="0"+a),a||0)})}),Q.default.filter("formatCategory",function(t){return Object(N.b)(t)}),new Q.default({el:"#app",router:F.a,template:"<App/>",components:{App:D.a}})},NHqc:function(t,s,a){"use strict";var n=a("HzJ8"),e=a.n(n),o=a("P9l9"),i=a("0xDb");s.a={name:"HairPhotos",data:function(){return{hairPhotos:[]}},methods:{previewHairPhoto:function(t,s){t=location.protocol+"//"+location.hostname+"/"+t,s=s.map(function(t){return location.protocol+"//"+location.hostname+"/"+t}),wx.previewImage({current:t,urls:s})},handleAddImage:function(){function t(t){var s=!0,n=!1,i=void 0;try{for(var r,c=e()(t);!(s=(r=c.next()).done);s=!0){var u=r.value;"string"==typeof u&&""!==u&&a.hairPhotos.push(u)}}catch(t){n=!0,i=t}finally{try{!s&&c.return&&c.return()}finally{if(n)throw i}}return Object(o.M)(a.hairPhotos)}var s=this;if(this.hairPhotos.length>=6)return void this.$toast("最多添加六张图片");var a=this,n=6-this.hairPhotos.length;Object(i.i)({count:n,sizeType:["compressed"],sourceType:["album","camera"]}).then(function(t){return Object(i.h)({localIds:t,resultList:[]})}).then(function(t){return Object(i.e)({serverIds:t,resultList:[]})}).then(function(s){return t(s)}).then(function(){return s.$toast("添加成功")}).catch(function(t){return s.$toast("添加失败")})},deleteHairPhoto:function(t){var s=this;this.$messagebox.confirm("确定删除？").then(function(){return s.hairPhotos.splice(t,1),Object(o.M)(s.hairPhotos).then(function(){s.$toast("删除成功")})}).catch(function(){})}},mounted:function(){this.hairPhotos=this.$route.params.photos}}},NyAJ:function(t,s){},ONvC:function(t,s){},OTD4:function(t,s,a){"use strict";s.a={props:{coupons:{type:Array,default:function(){return[]}},couponType:{type:Number,default:function(){return 0}},loading:{type:Boolean,default:function(){return!0}}},methods:{getCoupon:function(t){this.$emit("getCoupon",t)}}}},Oehy:function(t,s){},OlWO:function(t,s){},OyFB:function(t,s,a){"use strict";var n=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"product-view"},[a("mt-swipe",{attrs:{auto:4e3}},t._l(t.product.photos,function(t){return a("mt-swipe-item",{key:t},[a("div",{staticClass:"slide"},[a("div",{staticClass:"slide-content"},[a("img",{attrs:{src:t}})])])])})),t._v(" "),a("div",{staticClass:"list-item-wrap hairline"},[a("div",{staticClass:"list-item clearfix"},[a("p",{staticClass:"prod-detail"},[a("span",{staticClass:"title"},[t._v(t._s(t.product.name))]),t._v(" "),a("span",{staticClass:"price"},[a("span",{staticClass:"symbol"},[t._v("￥")]),a("span",{staticClass:"num"},[t._v(t._s(t.product.price))])]),t._v(" "),t.product.desc?a("span",{staticClass:"desc"},[t._v(t._s(t.product.desc))]):t._e()])])]),t._v(" "),t.product.countOption?a("div",{staticClass:"prod-options-wrap hairline"},[a("div",{staticClass:"prod-options"},[a("ul",t._l(t.product.countOption,function(s,n){return a("li",{key:n},[a("div",{staticClass:"prod-option-item"},[a("mt-button",{class:{"option-active":t.activeOption===n},attrs:{size:"large",type:"danger",plain:""},on:{click:function(s){t.toggleOption(n)}}},[t._v(t._s(s.label))])],1)])}))])]):t._e(),t._v(" "),a("div",{staticClass:"target-shop-wrap hairline"},[a("div",{staticClass:"target-shop"},[a("div",{staticClass:"title",on:{click:function(s){t.shopCollapse=!t.shopCollapse}}},[t._m(0),t._v(" "),a("span",{staticClass:"shop-name"},[t._v(t._s(t.shop.name)+" "),a("i",{staticClass:"fa fa-angle-right angle",class:{rotate:!t.shopCollapse},attrs:{"aria-hidden":"true"}})])]),t._v(" "),a("div",{staticClass:"detail",class:{"shop-collapse":t.shopCollapse}},[a("p",{staticClass:"time"},[t._v("营业时间：10:00-23:00")]),t._v(" "),a("p",{staticClass:"address"},[t._v("地址："+t._s(t.shop.address))])])])])],1)},e=[function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("span",[a("i",{staticClass:"fa fa-home"}),t._v(" 适用门店")])}],o={render:n,staticRenderFns:e};s.a=o},P7jC:function(t,s,a){"use strict";function n(t){a("ONvC")}var e=a("ph/z"),o=a("8c4J"),i=a("C7Lr"),r=n,c=i(e.a,o.a,!1,r,"data-v-c65428ac",null);s.a=c.exports},P9l9:function(t,s,a){"use strict";a.d(s,"E",function(){return i}),a.d(s,"o",function(){return r}),a.d(s,"C",function(){return c}),a.d(s,"D",function(){return u}),a.d(s,"n",function(){return l}),a.d(s,"v",function(){return d}),a.d(s,"h",function(){return p}),a.d(s,"i",function(){return h}),a.d(s,"d",function(){return m}),a.d(s,"j",function(){return f}),a.d(s,"B",function(){return v}),a.d(s,"L",function(){return g}),a.d(s,"K",function(){return _}),a.d(s,"G",function(){return C}),a.d(s,"w",function(){return w}),a.d(s,"M",function(){return b}),a.d(s,"y",function(){return I}),a.d(s,"F",function(){return k}),a.d(s,"a",function(){return B}),a.d(s,"z",function(){return y}),a.d(s,"f",function(){return x}),a.d(s,"r",function(){return Q}),a.d(s,"e",function(){return T}),a.d(s,"J",function(){return O}),a.d(s,"c",function(){return j}),a.d(s,"x",function(){return A}),a.d(s,"t",function(){return R}),a.d(s,"m",function(){return L}),a.d(s,"A",function(){return S}),a.d(s,"g",function(){return E}),a.d(s,"b",function(){return D}),a.d(s,"u",function(){return F}),a.d(s,"I",function(){return N}),a.d(s,"l",function(){return M}),a.d(s,"H",function(){return P}),a.d(s,"p",function(){return q}),a.d(s,"q",function(){return z}),a.d(s,"s",function(){return G}),a.d(s,"k",function(){return $});var n=a("2sCs"),e=a.n(n),o="/api/wx",i=function(t){return e()({method:"get",url:o+"/shops",params:t}).then(function(t){return t.data})},r=function(t){return e.a.get(o+"/shops/"+t).then(function(t){return t.data})},c=function(t){return e.a.get(o+"/shops/"+t+"/products").then(function(t){return t.data})},u=function(t,s){return e.a.get(o+"/shops/"+t+"/category/"+s+"/product-groups").then(function(t){return t.data})},l=function(t){return e.a.get(o+"/products/"+t).then(function(t){return t.data})},d=function(t,s){return e.a.get(o+"/user-info2?code="+t).then(function(t){return s(t.data)})},p=function(t){var s=t.product,a=t.openid,n=t.shopId;return e()({method:"post",url:o+"/order-coupon",data:{product:s,openid:a,shopId:n}}).then(function(t){return t.data})},h=function(t){var s=t.price,a=t.categories,n=t.apmId,i=t.shopId;return e()({method:"post",url:o+"/paynotify-coupon",data:{price:s,shopId:i,apmId:n,categories:a}}).then(function(t){return t.data})},m=function(t){return e()({method:"post",url:o+"/orders",data:t}).then(function(t){return t.data})},f=function(t){return e.a.get(o+"/orders/"+t).then(function(t){return t.data})},v=function(){return e.a.get(o+"/user-orders").then(function(t){return t.data})},g=function(t){return e()({method:"post",url:o+"/order-pay-ok/"+t}).then(function(t){return t.data})},_=function(t){return e()({method:"post",url:o+"/apm-pay-ok/"+t}).then(function(t){return t.data})},C=function(t){return e.a.get(o+"/user/"+t+"/tickets").then(function(t){return t.data})},w=function(t){return e.a.get(o+"/user/"+window._openid+"/wx-media/"+t).then(function(t){return t.data})},b=function(t){return e()({method:"post",url:o+"/user-hair-photos",data:{hairPhotos:t}}).then(function(t){return t.data})},I=function(){return e()({method:"get",url:o+"/categories"}).then(function(t){return t.data})},k=function(t,s){return e()({method:"get",url:o+"/shops/"+t+"/staffs",params:{category:s}}).then(function(t){return t.data})},B=function(t){return e()({method:"post",url:o+"/shops/"+t.shopId+"/add-comment",data:t}).then(function(t){return t.data})},y=function(t,s){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return e()({method:"post",url:o+"/shops/"+t+"/comments",data:{page:s,row:a,status:n}}).then(function(t){return t.data})},x=function(t){return e()({method:"get",url:o+"/user-comments",params:{apmId:t}}).then(function(t){return t.data})},Q=function(t,s){return e()({method:"get",url:o+"/staff/"+t,params:{category:s}}).then(function(t){return t.data})},T=function(t){return e()({method:"get",url:o+"/appointments/"+t+"/cases"}).then(function(t){return t.data})},O=function(t,s,a){return e()({method:"post",url:o+"/shops/"+t+"/staffs/"+s+"/appointment",data:{category:a}}).then(function(t){return t.data})},j=function(t){return e()({method:"delete",url:o+"/appointments/"+t}).then(function(t){return t.data})},A=function(t,s,a){return e()({method:"get",url:o+"/appointments",params:{status:t,offset:s,limit:a}}).then(function(t){return t.data})},R=function(t,s){return e()({method:"get",url:o+"/shops/"+t+"/staffs/"+s+"/product-option"}).then(function(t){return t.data})},L=function(t,s){return e()({method:"get",url:o+"/shops/"+t+"/primary-product/"+s}).then(function(t){return t.data})},S=function(t,s){return e()({method:"get",url:o+"/coupon",params:{shopId:t,qrcode:s||0}}).then(function(t){return t.data})},E=function(t){return e()({method:"get",url:o+"/coupon/"+t}).then(function(t){return t.data})},D=function(t){return e()({method:"post",url:o+"/user-coupons/"+t}).then(function(t){return t.data})},F=function(t){return e()({method:"get",url:o+"/user-coupons/"+t}).then(function(t){return t.data})},N=function(){return e()({method:"get",url:o+"/user-coupons"}).then(function(t){return t.data})},M=function(t){return e()({method:"get",url:o+"/pay-msg/"+t}).then(function(t){return t.data})},P=function(t){return e()({method:"get",url:o+"/coupons/"+t+"/users"}).then(function(t){return t.data})},q=function(t){return e()({method:"get",url:o+"/shops/"+t+"/entry-config"}).then(function(t){return t.data})},z=function(t){return e()({method:"get",url:o+"/shops/"+t+"/hair-photos"}).then(function(t){return t.data})},G=function(t){return e()({method:"get",url:o+"/staff/"+t+"/comment-stats"}).then(function(t){return t.data})},$=function(t){return e()({method:"get",url:o+"/order-msg/"+t}).then(function(t){return t.data})}},Po1D:function(t,s,a){t.exports=a.p+"static/img/completed-sign.f8cb260.png"},Q5ZX:function(t,s,a){"use strict";var n=function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"myorder-view"},[n("div",{staticClass:"order-list"},[t.listEmpty?n("p",{staticClass:"empty-list"},[t._v("暂时没有相关订单^_^")]):t._e(),t._v(" "),n("ul",[n("li",t._l(t.orders,function(s){return n("div",{key:s.orderId,staticClass:"order-item"},[n("div",{staticClass:"shop-area"},[n("p",[n("router-link",{staticClass:"shop-link",attrs:{to:{name:"Shop",params:{id:s.shop.shopId}}}},[n("span",[n("i",{staticClass:"fa fa-shopping-cart",attrs:{"aria-hidden":"true"}})]),n("span",{staticClass:"shop-name"},[t._v(t._s(s.shop.name))]),n("span",[t._v(" "),n("i",{staticClass:"fa fa-angle-right",attrs:{"aria-hidden":"true"}})])])],1),t._v(" "),n("p",{staticClass:"order-status"},[s.cancelled?n("span",{staticClass:"order-status cancelled"},[t._v("已取消")]):t._e(),t._v(" "),s.paid||s.cancelled?t._e():n("span",{staticClass:"order-status unpaid"},[t._v("未付款")]),t._v(" "),n("span",[t._v(" | ")]),t._v(" "),t._m(0,!0)])]),t._v(" "),s.paid?n("p",{staticClass:"order-done"},[n("img",{attrs:{src:a("Po1D"),alt:"订单已完成"}})]):t._e(),t._v(" "),n("div",{staticClass:"product-area clearfix"},[n("img",{attrs:{src:s.product.photos[0],alt:"商品图片"}}),t._v(" "),n("p",[t._v(t._s(s.product.desc))])]),t._v(" "),n("div",{staticClass:"order-fee-area hairline-bottom"},[n("p",[t._v("实付款："),n("span",[t._v("￥"+t._s(t._f("yuan")(s.total)))])])]),t._v(" "),n("div",{staticClass:"operation-area"},[n("mt-button",{attrs:{size:"small",type:"danger",plain:""}},[t._v("再次购买")])],1)])}))])])])},e=[function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("span",[a("i",{staticClass:"fa fa-trash-o",attrs:{"aria-hidden":"true"}})])}],o={render:n,staticRenderFns:e};s.a=o},QpKM:function(t,s){},RMUb:function(t,s,a){"use strict";s.a={props:{coupons:{type:Array,default:function(){return[]}},couponType:{type:Number,default:function(){return 0}}}}},RSR1:function(t,s,a){"use strict";var n=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"product-list-view"},[a("div",{staticClass:"product-list"},[a("p",{directives:[{name:"show",rawName:"v-show",value:!t.loading&&0===t.products.length,expression:"!loading && products.length === 0"}],staticClass:"no-prod-tip"},[t._v("这里还没有商品呢^_^")]),t._v(" "),a("p",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"no-prod-tip"},[t._v("努力加载中^_^")]),t._v(" "),a("div",{staticClass:"list-block accordion-list"},[a("ul",t._l(t.products,function(s){return a("li",{key:s.prodId,staticClass:"accordion-item",class:{"accordion-item-expanded":s.expanded},on:{click:function(a){t.toggleAcCollapse(s)}}},[a("a",{staticClass:"item-link item-content",attrs:{href:"javascript:;"}},[a("div",{staticClass:"item-inner"},[t._v(t._s(s.name))])]),t._v(" "),a("div",{staticClass:"accordion-item-content"},[a("router-link",{staticClass:"item-content-link",attrs:{to:{name:"Product",params:{shopId:t.$route.params.shopId,prodId:s.prodId}}}},[a("div",{staticClass:"list-item clearfix"},[a("div",{staticClass:"prod-img"},[a("img",{attrs:{src:s.photos[0],alt:""}})]),t._v(" "),a("p",{staticClass:"prod-detail"},[a("span",{staticClass:"title"},[t._v(t._s(s.name))]),t._v(" "),a("span",{staticClass:"price"},[a("span",{staticClass:"symbol"},[t._v("￥")]),a("span",{staticClass:"num"},[t._v(t._s(s.price))])]),t._v(" "),s.desc?a("span",{staticClass:"desc"},[t._v(t._s(s.desc))]):t._e()])])])],1)])}))])])])},e=[],o={render:n,staticRenderFns:e};s.a=o},Rxk8:function(t,s){},RyoK:function(t,s){},Rzs6:function(t,s,a){t.exports=a.p+"static/img/guide.65f747d.png"},S9Ze:function(t,s,a){"use strict";var n=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},e=[],o={render:n,staticRenderFns:e};s.a=o},SBX0:function(t,s,a){"use strict";var n=a("0xDb");s.a={name:"BookingResult",data:function(){return{booking:{orderId:0,waitNo:"",waitPeople:"",waitTime:"",price:"0.0"}}},mounted:function(){this.booking={waitNo:"E003",waitPeople:"1",waitTime:"20",productName:"洗剪吹",price:this.getDecimal(45.2,1)}},methods:{getDecimal:function(t,s,a){return Object(n.c)(t,s,a)}}}},T6rV:function(t,s){},TCk3:function(t,s){},"TT+/":function(t,s){},Tgm8:function(t,s,a){"use strict";function n(t){a("9TuS")}var e=a("XdEN"),o=a("RSR1"),i=a("C7Lr"),r=n,c=i(e.a,o.a,!1,r,"data-v-a857a8d4",null);s.a=c.exports},TzSv:function(t,s){},Tzim:function(t,s){},Tzrz:function(t,s){},U0kQ:function(t,s,a){"use strict";var n=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"page"},[a("section",{staticClass:"fixed_box"},[a("mt-navbar",{staticClass:"page-part",attrs:{fixed:""},model:{value:t.selected,callback:function(s){t.selected=s},expression:"selected"}},[a("mt-tab-item",{attrs:{id:"0"}},[t._v("未生效")]),t._v(" "),a("mt-tab-item",{attrs:{id:"1"}},[t._v("未使用")]),t._v(" "),a("mt-tab-item",{attrs:{id:"2"}},[t._v("已使用")]),t._v(" "),a("mt-tab-item",{attrs:{id:"3"}},[t._v("已过期")])],1)],1),t._v(" "),a("mt-tab-container",{model:{value:t.selected,callback:function(s){t.selected=s},expression:"selected"}},[a("mt-tab-container-item",{attrs:{id:"0"}},[a("coupon-list",{attrs:{coupons:t.waitActiveCoupon,couponType:3}})],1),t._v(" "),a("mt-tab-container-item",{attrs:{id:"1"}},[a("coupon-list",{attrs:{coupons:t.unUsedCoupon,couponType:0}})],1),t._v(" "),a("mt-tab-container-item",{attrs:{id:"2"}},[a("coupon-list",{attrs:{coupons:t.usedCoupon,couponType:1}})],1),t._v(" "),a("mt-tab-container-item",{attrs:{id:"3"}},[a("coupon-list",{attrs:{coupons:t.overdueCoupon,couponType:2}})],1)],1)],1)},e=[],o={render:n,staticRenderFns:e};s.a=o},Ulsu:function(t,s){},UtVB:function(t,s){},Vdmv:function(t,s,a){"use strict";function n(t){a("nb5g")}var e=a("fwj0"),o=a("tBjl"),i=a("C7Lr"),r=n,c=i(e.a,o.a,!1,r,null,null);s.a=c.exports},VlSd:function(t,s,a){"use strict";var n=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"pay-fail-view"},[a("h1",[t._v("支付失败")]),t._v(" "),a("mt-button",{attrs:{size:"large"}},[t._v("返回首页")])],1)},e=[],o={render:n,staticRenderFns:e};s.a=o},W6oo:function(t,s,a){"use strict";s.a={name:"Me"}},Wzps:function(t,s){},XdEN:function(t,s,a){"use strict";var n=a("wSez"),e=(a.n(n),a("P9l9"));s.a={name:"Products",data:function(){return{loading:!0,products:[]}},methods:{toggleAcCollapse:function(t){t.expanded=!t.expanded}},mounted:function(){var t=this,s=this.$route.params.shopId;this.loading=!0,Object(e.C)(s).then(function(s){t.loading=!1,t.products=s.data.products.map(function(t){return t.expanded=!0,t})}).catch(function(s){t.loading=!1,console.error(s),Object(n.Toast)("系统错误")})}}},Y12A:function(t,s){},YaEn:function(t,s,a){"use strict";var n=a("IvJb"),e=a("KGCO"),o=a("y1Td"),i=a("/qvy"),r=a("j7e0"),c=a("wA6P"),u=a("vBpR"),l=a("Tgm8"),d=a("oUfo"),p=a("0mnt"),h=a("DrO4"),m=a("oU+0"),f=a("Vdmv"),v=a("3eyk"),g=a("teim"),_=a("zAY/"),C=a("P7jC"),w=a("8Krd"),b=a("FqxC"),I=a("yk9H"),k=a("nhBj"),B=a("rfDJ"),y=a("HBr/"),x=a("qWKY"),Q=a("bmTC"),T=a("9zZn"),O=a("iwI6"),j=a("E8/i"),A=a("+0UC"),R=a("gZfF"),L=a("4yUA");n.default.use(e.a),s.a=new e.a({routes:[{path:"/",name:"Home",component:r.a},{path:"/shop/:id",name:"Shop",component:c.a},{path:"/shop/:shopId/category/:cateId/staffs",name:"Staffs",component:u.a},{path:"/shop/:shopId/ratings/",name:"Ratings",component:x.a},{path:"/rateForm/:shopId/:apmId",name:"RateForm",component:Q.a},{path:"/rateok/:shopId",name:"RateOK",component:T.a},{path:"/shop/:shopId/products",name:"Products",component:l.a},{path:"/shop/:shopId/category/:cateId/product-groups",name:"ProductGroup",component:b.a},{path:"/shop/:shopId/products/:prodId",name:"Product",component:d.a},{path:"/shop/:shopId/products/:prodId/order",props:!0,name:"Order",component:p.a},{path:"/bkresult/:bookId",name:"BookingResult",component:i.a},{path:"/pay/:orderId",props:!0,name:"Pay",component:m.a},{path:"/payok",name:"PayOK",component:f.a},{path:"/payfail",name:"PayFail",component:v.a},{path:"/me",name:"Me",component:h.a},{path:"/me/bookings",name:"MyBooking",component:_.a},{path:"/me/orders",name:"MyOrder",component:g.a},{path:"/me/tickets",name:"MyTicket",component:C.a},{path:"/me/hair-photos",name:"HairPhotos",component:w.a},{path:"/me/coupon",name:"Coupon",component:I.a},{path:"/coupon-center/:shopId",name:"CouponCenter",component:k.a},{path:"/qrcode-coupon-center/:shopId",name:"QrcodeCouponCenter",component:B.a},{path:"/coupon-share/:couponId",name:"CouponShare",component:y.a},{path:"/pay-notification",name:"PayNotification",component:O.a},{path:"/redirect",name:"Redirect",component:j.a},{path:"/shop/:shopId/staff-intro/:staffId",name:"StaffIntro",component:A.a},{path:"/shop/:shopId/staff-ratings:staffId/",name:"StaffRatings",component:R.a},{path:"/shop/:shopId/shop-hair-photos",name:"ShopHairPhotos",component:L.a},{path:"/blank",name:"Blank",component:o.a}]})},YdIN:function(t,s,a){"use strict";var n=a("P9l9"),e=a("yohg");s.a={name:"BookingList",data:function(){return{page:1,row:10,total:0,loading:!1,showRateBtn:!e.a}},props:["bookings"],filters:{formatStatusText:function(t){switch(t){case 0:return"排队中";case 1:return"服务中";case 2:return"已完成";case 3:return"已取消"}}},methods:{loadMore:function(){this.loading=!0,this.$indicator.open(),this.loading=!1},cancelBooking:function(t){var s=this;this.$messagebox.confirm("取消后排队信息无法恢复，确定取消？").then(function(){return Object(n.c)(t.apmId)}).then(function(){s.$toast("取消成功"),s.updateList()}).catch(function(t){s.$toast("系统错误："+t.message),console.error(t)})},rateBooking:function(t){this.$router.push({name:"RateForm",params:{shopId:t.shopId,staffId:t.staffId,apmId:t.apmId}})},updateList:function(){this.$emit("updateBookingList")}},mounted:function(){console.log(this.bookings)}}},Z4JN:function(t,s){},ZcqZ:function(t,s){},aF8s:function(t,s,a){"use strict";var n=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"shop-hair-photos"},[a("p",{directives:[{name:"show",rawName:"v-show",value:!t.loading&&0===t.photos.length,expression:"!loading && photos.length === 0"}],staticClass:"no-prod-tip"},[t._v("这里还没有发型照片呢^_^")]),t._v(" "),a("p",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"no-prod-tip"},[t._v("努力加载中^_^")]),t._v(" "),a("ul",{staticClass:"photo-list"},t._l(t.photos,function(t,s){return a("li",{key:s},[t.link?a("a",{attrs:{href:t.link}},[a("img",{attrs:{src:t.photo,alt:"image"}})]):a("img",{staticClass:"not-link",attrs:{src:t.photo,alt:"image"}})])}))])},e=[],o={render:n,staticRenderFns:e};s.a=o},aFyL:function(t,s,a){"use strict";var n=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"container"},[a("rating-list",{attrs:{row:10,shopId:t.shopId,status:1,filterStaffId:t.staffId}})],1)},e=[],o={render:n,staticRenderFns:e};s.a=o},bfod:function(t,s,a){"use strict";var n=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"order-view"},[a("div",{directives:[{name:"show",rawName:"v-show",value:!t.msg.paid,expression:"!msg.paid"}],staticClass:"view-content"},[a("div",{staticClass:"pay-info"},[a("el-card",[a("div",{staticClass:"text item"},[t._v("服务价格：￥"+t._s(t._f("yuan")(t.msg.price)))]),t._v(" "),a("div",{staticClass:"text item"},[t._v("服务项目："+t._s(t.getCategoryNames(t.msg.categories)))]),t._v(" "),a("div",{staticClass:"text item"},[t._v("工作人员："+t._s(t.msg.staff.username))])])],1),t._v(" "),t.coupons.length?a("mt-radio",{attrs:{title:"选择积分",align:"right",options:t.coupons},model:{value:t.selectedCouponId,callback:function(s){t.selectedCouponId=s},expression:"selectedCouponId"}}):t._e(),t._v(" "),a("div",{staticClass:"order-btn-bar"},[a("div",{staticClass:"btn",on:{click:t.submitOrder}},[t._v("提交订单")]),t._v(" "),a("p",[t._v("需付："),a("span",{staticClass:"order-price"},[t._v("￥"+t._s(t._f("yuan")(t.total)))])])])],1)])},e=[],o={render:n,staticRenderFns:e};s.a=o},bmTC:function(t,s,a){"use strict";function n(t){a("TCk3")}var e=a("06H/"),o=a("3LGd"),i=a("C7Lr"),r=n,c=i(e.a,o.a,!1,r,"data-v-3a9ecdc0",null);s.a=c.exports},c1OE:function(t,s,a){t.exports=a.p+"static/img/ticket-icon.d678958.png"},c2Eo:function(t,s){},cuZ5:function(t,s){},d6hU:function(t,s){},eL5M:function(t,s,a){"use strict";var n=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"content"},[t.bookings.length<=0?a("div",{staticClass:"tips"},[a("i",{staticClass:"iconfont"},[t._v("")]),t._v(" "),a("p",{staticClass:"text"},[t._v("暂无相关预约")])]):t._e(),t._v(" "),a("ul",t._l(t.bookings,function(s){return a("li",{key:s.id,staticClass:"bookItem"},[a("div",{staticClass:"book"},[a("div",{staticClass:"header vux-1px-b"},[a("div",{staticClass:"left"},[a("span",{staticClass:"title"},[t._v(t._s(s.staff.username)+" "),a("span",{staticClass:"badge"},[t._v("/ "+t._s(s.staff.intro))])]),t._v(" "),a("span",{staticClass:"sub"},[t._v(t._s(s.shop.address))]),a("br"),t._v(" "),a("span",{staticClass:"time sub"},[t._v(t._s(t._f("formatDate")(s.createTime)))])]),t._v(" "),a("div",{staticClass:"right"},[a("span",{staticClass:"bookingStatus",class:{waiting:0==s.status,cancel:3==s.status}},[t._v(t._s(t._f("formatStatusText")(s.status)))])])]),t._v(" "),0===s.status?a("div",{staticClass:"wait-info vux-1px-b"},[a("div",{staticClass:"col wait-no"},[a("span",[t._v(t._s(s.waitNo))]),t._v(" "),a("span",[t._v("排队号码")])]),t._v(" "),a("div",{staticClass:"col category"},[a("span",[t._v(t._s(t._f("formatCategory")(s.category)))]),t._v(" "),a("span",[t._v("预约项目")])]),t._v(" "),a("div",{staticClass:"col wait-count"},[a("span",[t._v(t._s(s.waitPeople))]),t._v(" "),a("span",[t._v("前面人数/人")])])]):t._e(),t._v(" "),0===s.status?a("div",{staticClass:"bottom-btn"},[a("mt-button",{attrs:{type:"default",size:"large"},on:{click:function(a){t.cancelBooking(s)}}},[t._v("取消排队")])],1):t._e(),t._v(" "),2===s.status&&t.showRateBtn?a("div",{staticClass:"bottom-btn"},[a("mt-button",{attrs:{type:"default",size:"large"},on:{click:function(a){t.rateBooking(s)}}},[t._v("评价")])],1):t._e()])])}))])},e=[],o={render:n,staticRenderFns:e};s.a=o},f0vK:function(t,s,a){"use strict";var n=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"scroll_box"},[t.coupons.length<=0?a("div",{staticClass:"tips"},[a("i",{staticClass:"iconfont"},[t._v("")]),t._v(" "),a("p",{staticClass:"text"},[t._v("暂无积分券")])]):t._e(),t._v(" "),t._l(t.coupons,function(s,n){return a("div",{key:n,staticClass:"coupon",class:{active:0==t.couponType}},[a("div",{staticClass:"topDot"}),t._v(" "),a("div",{staticClass:"bottomDot"}),t._v(" "),a("div",{staticClass:"state"},[1==t.couponType?a("i",{staticClass:"iconfont icon_style"},[t._v("")]):t._e(),t._v(" "),2==t.couponType?a("i",{staticClass:"iconfont icon_style"},[t._v("")]):t._e()]),t._v(" "),a("div",{staticClass:"left"},[a("span",[t._v("￥")]),a("strong",[t._v(t._s(s.couponAmount))])]),t._v(" "),a("div",{staticClass:"right"},[a("p",[t._v(t._s(s.couponName))]),t._v(" "),a("ul",[a("li",[t._v("限"+t._s(s.shopName)+"使用")]),t._v(" "),a("li",[t._v("满"+t._s(s.orderMinAmount)+"元可用")]),t._v(" "),3==t.couponType?a("li",[t._v(t._s(t._f("formatDate")(s.activeTimeStamp))+"起生效")]):t._e(),t._v(" "),3!=t.couponType?a("li",[t._v("有效期至"+t._s(t._f("formatDate")(s.endTimeStamp)))]):t._e()])])])})],2)},e=[],o={render:n,staticRenderFns:e};s.a=o},f2H6:function(t,s,a){"use strict";var n=a("vDqC"),e=a("P9l9");s.a={name:"Coupon",data:function(){return{selected:"1",coupons:[],waitActiveCoupon:[],usedCoupon:[],unUsedCoupon:[],overdueCoupon:[]}},components:{CouponList:n.a},methods:{listCoupon:function(){var t=this;Object(e.I)().then(function(s){t.coupons=s.data.coupons||[];var a=Date.now(),n=function(t){return t.used},e=function(t){return a>=t.activeTimeStamp&&a<t.endTimeStamp&&!t.used},o=function(t){return a>t.endTimeStamp&&!t.used},i=function(t){return a<t.activeTimeStamp&&!t.used};t.waitActiveCoupon=t.coupons.filter(i),t.usedCoupon=t.coupons.filter(n),t.unUsedCoupon=t.coupons.filter(e),t.overdueCoupon=t.coupons.filter(o)}).catch(function(s){console.log(s),t.$toast("系统错误："+s.message)})}},mounted:function(){this.listCoupon()}}},fBgl:function(t,s,a){"use strict";function n(t){a("40jM")}var e=a("11Pk"),o=a("t7zg"),i=a("C7Lr"),r=n,c=i(e.a,o.a,!1,r,null,null);s.a=c.exports},fbG9:function(t,s,a){"use strict";var n=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"shop-view"},[a("div",{staticClass:"shop-view-banner"},[a("div",t._l(t.shop.banners,function(t,s){return a("mt-swipe",{key:s,attrs:{"show-indicators":!1}},[a("mt-swipe-item",[a("a",{attrs:{href:t.link}},[a("img",{staticClass:"shop-img",attrs:{src:t.img,alt:"门店图片"}})])])],1)})),t._v(" "),a("div",{staticClass:"shop-detail hairline"},[a("h3",[t._v(t._s(t.shop.name))]),t._v(" "),a("p",[t._v("营业时间：10:00-23:00")])]),t._v(" "),a("div",{staticClass:"shop-address"},[a("p",[t._v(t._s(t.shop.address))])])]),t._v(" "),a("div",{staticClass:"entry-list"},[a("ul",t._l(t.entries,function(s,n){return s.show?a("li",{key:n},["1"===s.type&&s.show?a("router-link",{staticClass:"menu_detail_link",attrs:{to:{name:s.targetView,params:{shopId:t.$route.params.id,cateId:s.category}},tag:"div"}},[a("span",{staticClass:"icon"},[a("img",{attrs:{src:s.photo,alt:s.name}})]),t._v(" "),a("span",{staticClass:"name"},[t._v(t._s(s.name))])]):t._e(),t._v(" "),"2"===s.type&&s.showDialog&&s.show?a("a",{attrs:{href:"javascript:;"},on:{click:t.showDialog}},[a("span",{staticClass:"icon"},[a("img",{attrs:{src:s.photo,alt:s.name}})]),t._v(" "),a("span",{staticClass:"name"},[t._v(t._s(s.name))])]):t._e(),t._v(" "),"3"===s.type&&s.show?a("a",{attrs:{href:s.link}},[a("span",{staticClass:"icon"},[a("img",{attrs:{src:s.photo,alt:s.name}})]),t._v(" "),a("span",{staticClass:"name"},[t._v(t._s(s.name))])]):t._e()],1):t._e()}))]),t._v(" "),a("div",{staticClass:"shop-intro"},[a("div",{staticClass:"title"},[t._v("门店详情")]),t._v(" "),a("div",{staticClass:"intro hairline"},[a("p",[t._v(t._s(t.shop.intro))])]),t._v(" "),t._m(0)]),t._v(" "),a("div",{staticClass:"rate-intro"},[a("div",{staticClass:"title"},[t._v("服务评价")]),t._v(" "),a("div",{staticClass:"rate-info vux-1px-b"},[a("div",{staticClass:"col"},[a("span",[t._v(t._s(t.shopRating.score))]),t._v(" "),a("star-rating",{attrs:{"star-size":15,"read-only":!0,"show-rating":!1,rating:t.shopRating.score}})],1),t._v(" "),a("div",{staticClass:"col text"},[a("span",[t._v(t._s(t.shopRating.count))]),t._v(" "),a("span",[t._v("评论数")])]),t._v(" "),a("div",{staticClass:"col text"},[a("span",[t._v(t._s(t.shopRating.percent)+"%")]),t._v(" "),a("span",[t._v("上月好评率")])])]),t._v(" "),a("section",{staticStyle:{height:"52px"}},[a("mt-navbar",{staticClass:"page-part",model:{value:t.selectedCommentList,callback:function(s){t.selectedCommentList=s},expression:"selectedCommentList"}},[a("mt-tab-item",{attrs:{id:"1"}},[t._v("精选")]),t._v(" "),a("mt-tab-item",{attrs:{id:"2"}},[t._v("最新")])],1)],1),t._v(" "),a("mt-tab-container",{model:{value:t.selectedCommentList,callback:function(s){t.selectedCommentList=s},expression:"selectedCommentList"}},[a("mt-tab-container-item",{attrs:{id:"1"}},[a("rating-list",{attrs:{row:2,status:2,data:t.featuredRatings,shopId:t.shopId,loadonce:""}})],1),t._v(" "),a("mt-tab-container-item",{attrs:{id:"2"}},[a("rating-list",{attrs:{row:2,status:1,data:t.latestRatings,shopId:t.shopId,loadonce:""}})],1)],1),t._v(" "),a("router-link",{attrs:{to:{name:"Ratings",params:{shopId:t.shopId}}}},[a("mt-button",{attrs:{type:"default",size:"large"}},[t._v("查看更多评论")])],1)],1),t._v(" "),a("el-dialog",{attrs:{"custom-class":"el-dialog-custom",width:"80%","show-close":!1,visible:t.dialogVisible}},[a("ul",{staticClass:"cate-btn-list"},[a("li",[a("router-link",{attrs:{to:{name:"Staffs",params:{shopId:this.$route.params.id,cateId:t.jjCate}},tag:"div"}},[a("p",{staticClass:"btn-text"},[t._v("净剪")]),t._v(" "),a("p",{staticClass:"btn-desc"},[t._v("不含洗头费用更优惠，剪完后的碎发会被吸干净")])])],1),t._v(" "),a("li",[a("router-link",{attrs:{to:{name:"Staffs",params:{shopId:this.$route.params.id,cateId:t.xjCate}},tag:"div"}},[a("p",{staticClass:"btn-text"},[t._v("洗剪")]),t._v(" "),a("p",{staticClass:"btn-desc"},[t._v("含洗头费用价更高，头发被清洁后更利于修剪")])])],1)]),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("mt-button",{attrs:{size:"large"},on:{click:t.closeDialog}},[t._v("取消")])],1)])],1)},e=[function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"tags"},[a("ul",[a("li",[a("span",[a("i",{staticClass:"fa fa-check-square-o"}),t._v(" 品质保障")])]),t._v(" "),a("li",[a("span",[a("i",{staticClass:"fa fa-check-square-o"}),t._v(" 减少等待")])]),t._v(" "),a("li",[a("span",[a("i",{staticClass:"fa fa-check-square-o"}),t._v(" 消费透明")])]),t._v(" "),a("li",[a("span",[a("i",{staticClass:"fa fa-check-square-o"}),t._v(" 优惠特价")])])])])}],o={render:n,staticRenderFns:e};s.a=o},fwj0:function(t,s,a){"use strict";s.a={name:"PayOK"}},"g+7g":function(t,s,a){t.exports=a.p+"static/img/m-fx-3.faf1d12.png"},g7aJ:function(t,s,a){"use strict";var n=function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"coupon-center-view page"},[n("coupon-list2",{attrs:{coupons:t.coupons},on:{getCoupon:t.handleGetCoupon}}),t._v(" "),n("coupon-user-list",{attrs:{users:t.users}}),t._v(" "),n("section",{staticStyle:{height:"52px"}},[n("mt-navbar",{staticClass:"page-part",model:{value:t.selectedCommentList,callback:function(s){t.selectedCommentList=s},expression:"selectedCommentList"}},[n("mt-tab-item",{attrs:{id:"1"}},[t._v("精选")]),t._v(" "),n("mt-tab-item",{attrs:{id:"2"}},[t._v("最新")])],1)],1),t._v(" "),n("mt-tab-container",{model:{value:t.selectedCommentList,callback:function(s){t.selectedCommentList=s},expression:"selectedCommentList"}},[n("mt-tab-container-item",{attrs:{id:"1"}},[n("rating-list",{attrs:{row:2,status:2,shopId:t.shopId,loadonce:""}})],1),t._v(" "),n("mt-tab-container-item",{attrs:{id:"2"}},[n("rating-list",{attrs:{row:2,status:1,shopId:t.shopId,loadonce:""}})],1)],1),t._v(" "),n("router-link",{attrs:{to:{name:"Ratings",params:{shopId:t.shopId}}}},[n("mt-button",{attrs:{type:"default",size:"large"}},[t._v("查看更多评论")])],1),t._v(" "),n("h3",[t._v("男生发型")]),t._v(" "),n("mt-swipe",{attrs:{auto:4e3}},[n("mt-swipe-item",[n("div",{staticClass:"slide"},[n("div",{staticClass:"slide-content"},[n("img",{attrs:{src:a("/EY3")}})])])]),t._v(" "),n("mt-swipe-item",[n("div",{staticClass:"slide"},[n("div",{staticClass:"slide-content"},[n("img",{attrs:{src:a("tuqB")}})])])]),t._v(" "),n("mt-swipe-item",[n("div",{staticClass:"slide"},[n("div",{staticClass:"slide-content"},[n("img",{attrs:{src:a("g+7g")}})])])])],1),t._v(" "),n("h3",[t._v("女生发型")]),t._v(" "),n("mt-swipe",{attrs:{auto:4e3}},[n("mt-swipe-item",[n("div",{staticClass:"slide"},[n("div",{staticClass:"slide-content"},[n("img",{attrs:{src:a("zSz4")}})])])]),t._v(" "),n("mt-swipe-item",[n("div",{staticClass:"slide"},[n("div",{staticClass:"slide-content"},[n("img",{attrs:{src:a("2kMg")}})])])]),t._v(" "),n("mt-swipe-item",[n("div",{staticClass:"slide"},[n("div",{staticClass:"slide-content"},[n("img",{attrs:{src:a("DxLK")}})])])])],1),t._v(" "),n("router-link",{staticClass:"link-btn",attrs:{to:{name:"Home"}}},[n("mt-button",{attrs:{size:"large"}},[t._v("个人中心")])],1),t._v(" "),n("section",{directives:[{name:"show",rawName:"v-show",value:t.showMask,expression:"showMask"}],staticClass:"mask",attrs:{id:"mask"},on:{click:function(s){t.showMask=!1}}},[n("img",{staticStyle:{width:"375px",height:"365px",position:"absolute",right:"10px"},attrs:{src:a("u1zd")}})])],1)},e=[],o={render:n,staticRenderFns:e};s.a=o},"gZ/+":function(t,s,a){"use strict";var n=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"staff-list-view"},[a("div",{staticClass:"list-inner"},[a("ul",t._l(t.staffs,function(s){return a("li",{key:s.userid,staticClass:"staff-item"},[a("router-link",{attrs:{to:{name:"StaffIntro",params:{staffId:s.userid,shopId:s.shop},query:{category:t.category,workstatus:s.status}},tag:"div"}},[a("div",{staticClass:"media"},[a("div",{staticClass:"media-left"},[a("div",{staticClass:"avatar",attrs:{slot:"icon"},slot:"icon"},[a("img",{attrs:{src:s.photo,alt:"头像"}})])]),t._v(" "),a("div",{staticClass:"media-body"},[a("div",{staticClass:"details"},[a("p",{staticClass:"staff-name"},[t._v(t._s(s.username))]),t._v(" "),s.intro?a("mt-badge",{staticClass:"staff-intro",attrs:{color:"#776d6c",size:"small"}},[t._v(t._s(s.intro))]):t._e(),t._v(" "),s.mark?a("mt-badge",{staticClass:"staff-intro",attrs:{color:"#6aaefd",size:"small"}},[t._v(t._s(s.mark))]):t._e(),t._v(" "),a("span",{staticClass:"staff-price"},[a("span",[t._v("¥"+t._s(t.getDecimal(s.price,1).split(".")[0]))]),a("span",{staticClass:"decimal--small"},[t._v("."+t._s(t.getDecimal(s.price,1).split(".")[1]))])])],1),t._v(" "),a("div",{staticClass:"media-bottom"},[a("p",{staticClass:"wait-status"},[t._v(t._s(s.apmCount>0?"前面还有 "+s.apmCount+" 人":"无需等待，可立即开始"))]),t._v(" "),0===s.status?a("mt-button",{staticClass:"appointment-btn",class:{"full-width":"4"!==t.category,"short-width":"4"===t.category},attrs:{type:"primary",size:"small"},on:{click:function(a){a.preventDefault(),t.handleMakeAppointment(s)}}},[t._v("取号")]):t._e(),t._v(" "),3===s.status?a("mt-button",{staticClass:"off-work-btn",class:{"full-width":"4"!==t.category,"short-width":"4"===t.category},attrs:{type:"default",size:"small"}},[t._v("下班了")]):t._e(),t._v(" "),4===s.status?a("mt-button",{staticClass:"off-work-btn",class:{"full-width":"4"!==t.category,"short-width":"4"===t.category},attrs:{type:"default",size:"small"}},[t._v("快下班了")]):t._e(),t._v(" "),"4"===t.category?a("router-link",{attrs:{to:{name:"Product",params:{shopId:s.shop,prodId:t.category},query:{cateId:t.category,staffId:s.userid}}}},[a("mt-button",{staticClass:"appointment-btn",attrs:{type:"primary",size:"small"}},[t._v("价格")])],1):t._e()],1)])])])],1)}))]),t._v(" "),"1"===t.category||"2"===t.category?a("div",{staticClass:"nav-btn",class:{"status-1":"1"===t.category,"status-2":"2"===t.category},on:{click:t.handleNavBtn}},[a("span",{staticClass:"txt"},[t._v(t._s(t.navBtnTxt))])]):t._e()])},e=[],o={render:n,staticRenderFns:e};s.a=o},gZfF:function(t,s,a){"use strict";function n(t){a("Z4JN")}var e=a("7GlQ"),o=a("aFyL"),i=a("C7Lr"),r=n,c=i(e.a,o.a,!1,r,"data-v-8b3cc28e",null);s.a=c.exports},"gnn+":function(t,s,a){"use strict";s.a={}},hRV4:function(t,s,a){"use strict";var n=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"staff-intro-view"},[t._m(0),t._v(" "),a("div",{staticClass:"staff-basic-info"},[a("mt-cell",{attrs:{title:t.staff.title}},[t.staff.price>0?a("span",[t._v("￥"+t._s(t.staff.price)+".0")]):t._e(),t._v(" "),a("div",{staticClass:"avatar",attrs:{slot:"icon"},slot:"icon"},[a("img",{attrs:{src:t.staff.photo,width:"60",height:"60"}})])])],1),t._v(" "),a("div",{staticClass:"info-block service-rating"},[a("h3",{staticClass:"block-title rating-title"},[t._v("服务评价")]),t._v(" "),a("div",{staticClass:"rating-num"},[a("div",{staticClass:"rating-detail rating-percent"},[a("span",{staticClass:"num"},[t._v(t._s(t.commentStats.goodRatePercent))]),t._v(" "),a("span",{staticClass:"tip"},[t._v("好评率")])]),t._v(" "),a("div",{staticClass:"rating-detail rating-count"},[a("span",{staticClass:"num"},[t._v(t._s(t.commentStats.rateCount))]),t._v(" "),a("span",{staticClass:"tip"},[t._v("评论数")])])]),t._v(" "),a("div",{staticClass:"rating-count"},[a("mt-button",{attrs:{size:"small"}},[t._v("1星 "+t._s(t.commentStats.star1))]),t._v(" "),a("mt-button",{attrs:{size:"small"}},[t._v("2星 "+t._s(t.commentStats.star2))]),t._v(" "),a("mt-button",{attrs:{size:"small"}},[t._v("3星 "+t._s(t.commentStats.star3))]),t._v(" "),a("mt-button",{attrs:{size:"small"}},[t._v("4星 "+t._s(t.commentStats.star4))]),t._v(" "),a("mt-button",{attrs:{size:"small"}},[t._v("5星 "+t._s(t.commentStats.star5))])],1),t._v(" "),a("rating-list",{attrs:{row:1,status:1,shopId:t.shopId,"filter-staff-id":t.staffId}}),t._v(" "),a("div",{staticClass:"check-all-rating"},[a("router-link",{attrs:{to:{name:"StaffRatings",params:{shopId:t.shopId,staffId:t.staffId}}}},[a("mt-button",{attrs:{size:"small",type:"primary"}},[t._v("查看全部评论")])],1)],1)],1),t._v(" "),a("div",{staticClass:"info-block staff-resume"},[a("h3",{staticClass:"block-title"},[t._v("剪发经验")]),t._v(" "),t._m(1),t._v(" "),a("ul",{staticClass:"jobs"},t._l(t.jobs,function(s,n){return a("li",{key:n},[a("p",{staticClass:"shop-title"},[t._v(t._s(s.company)+" - "+t._s(s.title))]),t._v(" "),a("p",{staticClass:"jop-time"},[t._v("在职时间："+t._s(s.startTime)+"至"+t._s(s.endTime))])])}))]),t._v(" "),a("div",{staticClass:"info-block staff-works"},[a("h3",{staticClass:"block-title"},[t._v("Ta的作品")]),t._v(" "),a("div",{staticClass:"works"},[a("el-carousel",{staticClass:"work-carousel",attrs:{height:"450px",arrow:"always",autoplay:""}},t._l(t.works,function(s,n){return a("el-carousel-item",{key:n},[a("div",{staticClass:"work-box"},[a("img",{attrs:{src:s.photos[0],alt:""},on:{click:function(s){t.showPhotoPopup(n)}}}),t._v(" "),a("div",{staticClass:"work-detail"},[a("ul",[a("li",[a("span",{staticClass:"detail-cate"},[t._v("[发量]")]),t._v(" \n                  "),a("span",{staticClass:"detail-option",class:{highlight:"少"===s.hairAmount}},[t._v("少")]),t._v(" "),a("span",{staticClass:"detail-option",class:{highlight:"普通"===s.hairAmount}},[t._v("普通")]),t._v(" "),a("span",{staticClass:"detail-option",class:{highlight:"多"===s.hairAmount}},[t._v("多")])]),t._v(" "),a("li",[a("span",{staticClass:"detail-cate"},[t._v("[发质]")]),t._v(" \n                  "),a("span",{staticClass:"detail-option",class:{highlight:"软"===s.hairQuality}},[t._v("软")]),t._v(" "),a("span",{staticClass:"detail-option",class:{highlight:"普通"===s.hairQuality}},[t._v("普通")]),t._v(" "),a("span",{staticClass:"detail-option",class:{highlight:"硬"===s.hairQuality}},[t._v("硬")])]),t._v(" "),a("li",[a("span",{staticClass:"detail-cate"},[t._v("[脸型]")]),t._v(" \n                  "),a("span",{staticClass:"detail-option",class:{highlight:"圆形"===s.faceShape}},[t._v("圆形")]),t._v(" "),a("span",{staticClass:"detail-option",class:{highlight:"椭圆"===s.faceShape}},[t._v("椭圆")]),t._v(" "),a("span",{staticClass:"detail-option",class:{highlight:"四角"===s.faceShape}},[t._v("四角")]),t._v(" "),a("span",{staticClass:"detail-option",class:{highlight:"逆三角"===s.faceShape}},[t._v("逆三角")]),t._v(" "),a("span",{staticClass:"detail-option",class:{highlight:"菱形"===s.faceShape}},[t._v("菱形")]),t._v(" "),a("span",{staticClass:"detail-option",class:{highlight:"正三角"===s.faceShape}},[t._v("正三角")])])])])])])}))],1)]),t._v(" "),a("div",{staticClass:"info-block staff-video"},[a("h3",{staticClass:"block-title"},[t._v("Ta的视频")]),t._v(" "),a("div",{staticClass:"videos"},[a("el-carousel",{staticClass:"video-carousel",attrs:{arrow:"always",autoplay:""}},t._l(t.videos,function(t,s){return a("el-carousel-item",{key:s},[a("div",{staticClass:"video-box"},[a("video",{attrs:{src:t,controls:"controls",preload:"auto"}})])])}))],1)]),t._v(" "),a("div",{staticClass:"apm-btn"},[0===t.staff.status?a("mt-button",{attrs:{size:"large",type:"primary"},on:{click:t.handleMakeAppointment}},[t._v("取号")]):t._e(),t._v(" "),4===t.staff.status?a("mt-button",{attrs:{size:"large",type:"default"}},[t._v("快下班了")]):t._e(),t._v(" "),3===t.staff.status?a("mt-button",{attrs:{size:"large",type:"default"}},[t._v("下班了")]):t._e()],1),t._v(" "),a("mt-popup",{staticClass:"photos-popup",attrs:{"popup-transition":"popup-fade"},model:{value:t.photoPopupVisible,callback:function(s){t.photoPopupVisible=s},expression:"photoPopupVisible"}},[a("el-carousel",{staticClass:"photo-carousel",attrs:{height:"320px",arrow:"always",autoplay:""}},t._l(t.popupPhotos,function(t,s){return a("el-carousel-item",{key:s},[a("div",{staticClass:"photo-box"},[a("img",{attrs:{src:t,alt:""}})])])}))],1)],1)},e=[function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"banner"},[n("img",{attrs:{src:a("81Lj"),alt:""}})])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"career-years"},[a("span",[t._v("10年剪发经验")])])}],o={render:n,staticRenderFns:e};s.a=o},hpJz:function(t,s){},i0SR:function(t,s,a){"use strict";var n=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"wrapper"},[a("div",{staticClass:"booking-view"},[t._m(0),t._v(" "),a("div",{staticClass:"booking-content"},[a("div",{staticClass:"wait-info vux-1px-b"},[a("div",{staticClass:"col wait-no"},[a("span",[t._v(t._s(t.booking.waitNo))]),t._v(" "),a("span",[t._v("排队号码")])]),t._v(" "),a("div",{staticClass:"col wait-count"},[a("span",[t._v(t._s(t.booking.waitPeople))]),t._v(" "),a("span",[t._v("前面人数/人")])]),t._v(" "),a("div",{staticClass:"col wait-time"},[a("span",[t._v(t._s(t.booking.waitTime))]),t._v(" "),a("span",[t._v("预计等待/分钟")])])]),t._v(" "),a("div",{staticClass:"product-info vux-1px-b"},[a("div",{staticClass:"product"},[t._v(t._s(t.booking.productName))]),t._v(" "),a("div",{staticClass:"price"},[a("span",[t._v("¥"+t._s(t.booking.price.split(".")[0]))]),a("span",{staticClass:"decimal--small"},[t._v("."+t._s(t.booking.price.split(".")[1]))])])]),t._v(" "),t._m(1)])]),t._v(" "),a("div",{staticClass:"bottom-button"},[a("router-link",{attrs:{to:{name:"Pay",params:{orderId:t.booking.orderId}}}},[a("mt-button",{attrs:{type:"danger",size:"large"}},[t._v("立即支付")])],1)],1)])},e=[function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"header"},[a("i",{staticClass:"iconfont"},[t._v("")]),t._v(" "),a("h3",{staticClass:"bookingState"},[t._v("取号成功")]),t._v(" "),a("p",{staticClass:"helpInfo"},[t._v("请注意排队时间及时到店，等待叫号剪发")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"business-info"},[a("p",[t._v("温馨提示：")]),t._v(" "),a("ul",[a("li",[t._v("优惠券和团购券在结算时使用")]),t._v(" "),a("li",[t._v("为了不影响您的排队信誉，如不剪发，请及时取消排号或选择重排~")]),t._v(" "),a("li",[t._v("等待时间仅供参考，请留意公众号实时排队提醒")])])])}],o={render:n,staticRenderFns:e};s.a=o},ijHt:function(t,s,a){"use strict";var n=a("qxLr");s.a={name:"Ratings",components:{RatingList:n.a},data:function(){return{selected:"1",page:1,ratings:[],selectedratings:[],loading:!1,shopId:""}},methods:{},created:function(){this.shopId=this.$route.params.shopId}}},iwI6:function(t,s,a){"use strict";function n(t){a("Y12A")}var e=a("jOM/"),o=a("bfod"),i=a("C7Lr"),r=n,c=i(e.a,o.a,!1,r,"data-v-279a96f4",null);s.a=c.exports},j7e0:function(t,s,a){"use strict";function n(t){a("22XI")}var e=a("/NgF"),o=a("m1XM"),i=a("C7Lr"),r=n,c=i(e.a,o.a,!1,r,null,null);s.a=c.exports},"jOM/":function(t,s,a){"use strict";var n=a("lC5x"),e=a.n(n),o=a("J0Oq"),i=a.n(o),r=a("wSez"),c=(a.n(r),a("P9l9")),u=a("yohg"),l=a("0xDb");s.a={props:["shopId","prodId"],name:"Order",data:function(){return{total:0,shop:{},popupVisible:!1,orderId:"123",price:0,coupons:[],couponIds:[],choosedCoupon:{couponAmount:0,couponIds:[]},msg:{shop:{},staff:{}},selectedCouponId:"",submiting:!1,msgId:""}},watch:{selectedCouponId:function(t,s){if(t!==s){this.couponIds=[t];var a=this.coupons.find(function(s){return s.couponId===t});this.choosedCoupon={couponAmount:a.couponAmount,couponIds:this.couponIds},this.total=this.getTotalFee()}}},methods:{confirmCoupon:function(){this.total=this.getTotalFee(),this.popupVisible=!1},showPopup:function(){this.popupVisible=!0},submitOrder:function(){var t=this;if(!this.submiting){this.submiting=!0;var s={total:this.getTotalFee(),oriTotal:this.msg.price,categories:this.msg.categories,apmId:this.msg.apmId,msgId:this.msg.msgId,shopId:this.msg.shopId,couponIds:this.couponIds};if(u.a)this.$router.push({name:"Pay",params:{orderId:"2333"}});else{var a=Object(r.Toast)({message:"正在创建订单...",duration:-1});Object(c.d)(s).then(function(s){a.close();var n=s.data.order;t.orderId=n.orderId,t.$router.push({name:"Pay",params:{orderId:t.orderId}})}).catch(function(t){a.close(),Object(r.Toast)("创建订单失败，请重试！")})}}},getTotalFee:function(){var t=this.choosedCoupon.couponAmount,s=this.msg.price-100*t;return s=s<0?1:s,parseInt(s)},handleCoupon:function(){var t=this;return i()(e.a.mark(function s(){return e.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:Object(c.i)({apmId:t.msg.apmId,categories:t.msg.categories,price:t.msg.price,shopId:t.msg.shopId}).then(function(s){t.coupons=(s.data.coupons||[]).map(function(t){return t.label=t.couponName+" ￥"+t.couponAmount+".00",t.value=t.couponId,t}),t.choosedCoupon=t.coupons.length>0?{couponAmount:t.coupons[0].couponAmount,couponIds:[t.coupons[0].couponId]}:{couponAmount:0,couponIds:[]},t.couponIds=t.choosedCoupon.couponIds,t.selectedCouponId=t.couponIds[0]||"",t.total=t.getTotalFee()});case 1:case"end":return s.stop()}},s,t)}))()},getCategoryNames:function(t){return(t||[]).map(l.b).join("、")},waitTillCreatingOrderDone:function(){var t=this;return i()(e.a.mark(function s(){var a,n,o,i,r;return e.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:a=!0,n=10,o=0,i=void 0;case 4:if(!(a&&o<n)){s.next=21;break}return s.prev=5,console.log("[>>] get order by msg id. msgId: %s",t.msgId),s.next=9,Object(c.k)(t.msgId);case 9:i=s.sent,console.log("[OK] get order by msg id. msgId: %s, resp: %j",t.msgId,i),a=!1,s.next=18;break;case 14:s.prev=14,s.t0=s.catch(5),console.log("[ERR] get order by msg id. msgId: %s",t.msgId),console.error(s.t0);case 18:o++,s.next=4;break;case 21:if(!a){s.next=24;break}return t.$toast("系统错误"),s.abrupt("return");case 24:r=i.data.order,t.orderId=r.orderId,t.$router.push({name:"Pay",params:{orderId:t.orderId}});case 27:case"end":return s.stop()}},s,t,[[5,14]])}))()}},mounted:function(){var t=this,s=Object(l.g)("msgId");this.msgId=s;var a=Object(r.Toast)({message:"正在获取服务信息...",duration:-1});s&&Object(c.l)(s).then(function(s){console.log(s);var n=s.data.msg;return n.paid?(a.close(),void(a=Object(r.Toast)("你已支付过本次服务，请勿重复操作^_^"))):n.isOrderLocked?(a.close(),a=Object(r.Toast)("订单已提交过，正在获取订单信息..."),t.waitTillCreatingOrderDone()):(t.msg=n,a.close(),t.handleCoupon())}).catch(function(t){console.error(t),a("系统错误："+t.message)})}}},jYs4:function(t,s){},jxTG:function(t,s){},kOTt:function(t,s,a){"use strict";function n(t){a("CC1u")}var e=a("kaKa"),o=a("gZ/+"),i=a("C7Lr"),r=n,c=i(e.a,o.a,!1,r,"data-v-2013767c",null);s.a=c.exports},kaKa:function(t,s,a){"use strict";var n=a("P9l9"),e=a("0xDb");s.a={name:"StaffList",props:["shopId","cateId"],computed:{navBtnTxt:function(){return"1"===this.category?"去更优惠的净剪看看":"去更便于剪发的洗剪看看"}},data:function(){return{staffs:[],value:45,category:this.cateId}},methods:{getDecimal:function(t,s,a){return Object(e.c)(t,s,a)},fetchData:function(){var t=this;Object(n.F)(this.shopId,this.category).then(function(s){t.staffs=s.data.staffs}).catch(function(t){console.error(t)})},handleMakeAppointment:function(t){var s=this;this.$messagebox({title:"确定取号？",message:'<h1 style="color:#ff5000">¥'+t.price+'</h1><p style="margin:0;">当前服务发型师最低价格</p>如过号需重新取号, 请安排好时间到店',showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(a){if("cancel"!==a)return Object(n.J)(s.shopId,t.userid,s.cateId).then(function(){return s.$messagebox({title:"取号成功",message:'<p style="margin: 0;">亲，出门消费前先取号，后根据收到的进度消息提前到店更合理哦，避免到店取号时才发现前面已等候多人。</p><p style="margin:0;">让美发减少等待<br>从提前取号开始</p>理发后请发型师将发型照片存到个人中心，消费后请对本次服务评价并领取积分优惠券',showCancelButton:!0,confirmButtonText:"我知道了",cancelButtonText:"去看看发型"})}).then(function(t){if("cancel"===t)return void(window.location.href="http://www.fanxify.com/app/index.php?i=3&c=entry&m=ewei_shopv2&do=mobile&r=diypage&id=39");s.$router.push({name:"MyBooking"})})}).catch(function(t){console.error(t),t.message.indexOf("409")>0?s.$toast("你已预约，请勿重复取号"):s.$toast("预约失败。请稍后重试："+t.message)})},handleNavBtn:function(){var t="1"===this.category?"2":"1";this.$router.push({name:"Staffs",params:{shopId:this.shopId,cateId:t}}),this.category=t,this.fetchData()}},mounted:function(){this.fetchData(),console.log("abc")}}},kay0:function(t,s){},kqL2:function(t,s,a){"use strict";var n=a("P9l9"),e=a("qxLr");s.a={name:"CouponShare",data:function(){return{couponId:"",show:!1,shopId:"",coupon:{},ratings:[]}},components:{RatingList:e.a},methods:{showTips:function(){this.show=!0},goHome:function(){this.$router.push({name:"Home",query:{state:"shop-home"}})},addCoupon:function(){var t=this;Object(n.b)(this.couponId).then(function(s){t.getCouponDetail()}).catch(function(s){console.log(s),t.$toast("系统错误："+s.message)})},getCouponDetail:function(){var t=this;if(this.couponId=this.$route.params.couponId,!this.couponId)return void this.$toast("积分不存在");this.$indicator.open(),Object(n.u)(this.couponId).then(function(s){t.coupon=s.data.coupons[0],Object(n.z)(t.coupon.shopId,1,5).then(function(s){s.count&&(t.ratings=s.comments)}),t.$indicator.close()}).catch(function(s){t.$indicator.close(),console.log(s),t.$toast(""+s.message)})},wxShare:function(){var t=this;wx.ready(function(){wx.onMenuShareAppMessage({title:"凡希发艺",desc:"一起领取积分吧~",link:"https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx546482739ca755c0&redirect_uri=http%3A%2F%2Ftest-shop.fanxify.com%2Fredirect%2Fcoupon-share-"+t.couponId+"&response_type=code&scope=snsapi_userinfo&state=coupon-share-"+t.couponId+"#wechat_redirect",imgUrl:"../assets/images/ticket-icon.png",success:function(){t.addCoupon(),t.show=!1,t.$toast("分享成功")}})}),wx.error(function(t){})}},mounted:function(){this.getCouponDetail(),this.wxShare()}}},la6D:function(t,s,a){"use strict";var n=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"content"},[t.ratings.length<=0?a("div",{staticClass:"tips"},[a("p",{staticClass:"text"},[t._v("暂无相关评论")])]):t._e(),t._v(" "),a("ul",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMore,expression:"loadMore"}],attrs:{"infinite-scroll-disabled":"scrollDisabled","infinite-scroll-distance":"250"}},t._l(t.ratings,function(s){return a("li",{key:s.id,staticClass:"ratingItem"},[a("div",{staticClass:"header vux-1px-b"},[a("div",{staticClass:"left"},[a("img",{staticClass:"avatar",attrs:{src:s.avatar,alt:""}})]),t._v(" "),a("div",{staticClass:"right"},[a("div",{staticClass:"top"},[a("span",{staticClass:"name"},[t._v(t._s(s.nickname)+" "),s.phone?a("span",{staticClass:"phone"},[t._v(t._s(s.phone))]):t._e()]),t._v(" "),a("star-rating",{attrs:{"star-size":15,"read-only":!0,"show-rating":!1,rating:s.rating}})],1),t._v(" "),a("p",{staticClass:"comment"},[t._v(t._s(s.comment))]),t._v(" "),a("div",{staticClass:"bottom sub"},[s.staffname?a("span",[t._v("发型师： "+t._s(s.staffname))]):t._e(),a("span",[t._v(t._s(t._f("formatDate")(s.createTime,"{y}-{m}-{d}")))])])])])])}))])},e=[],o={render:n,staticRenderFns:e};s.a=o},m1XM:function(t,s,a){"use strict";var n=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"home-view"},[a("div",{directives:[{name:"show",rawName:"v-show",value:!t.loading,expression:"!loading"}],staticClass:"home-view-inner"},[a("mt-tabbar",{attrs:{fixed:""},model:{value:t.selected,callback:function(s){t.selected=s},expression:"selected"}},[a("mt-tab-item",{attrs:{id:"home"}},[a("div",[a("i",{staticClass:"fa fa-home fa-2x",attrs:{"aria-hidden":"true"}})]),t._v("\n        首页\n      ")]),t._v(" "),a("mt-tab-item",{attrs:{id:"me"}},[a("div",[a("i",{staticClass:"fa fa-user fa-2x",attrs:{"aria-hidden":"true"}})]),t._v("\n        我的\n      ")])],1),t._v(" "),a("mt-tab-container",{model:{value:t.selected,callback:function(s){t.selected=s},expression:"selected"}},[a("mt-tab-container-item",{attrs:{id:"home"}},[0!==t.shops.length||t.loading?t._e():a("p",{staticClass:"no-shop-tip"},[t._v("暂时没有相关门店^_^")]),t._v(" "),a("div",{staticClass:"shop-list"},t._l(t.shops,function(s){return a("div",{key:s.shopId,staticClass:"shop-card"},[a("div",{staticClass:"title"},[a("span",{staticClass:"shop-name"},[t._v(t._s(s.name))]),t._v(" "),a("span",{staticClass:"custom-count"},[a("router-link",{attrs:{to:{name:"Shop",params:{id:s.shopId}}}},[t._v("点击进入>")])],1)]),t._v(" "),a("div",{staticClass:"shop-img"},[a("router-link",{attrs:{to:{name:"Shop",params:{id:s.shopId}}}},[a("img",{attrs:{src:s.photo,alt:"门店图片"}})])],1),t._v(" "),a("div",{staticClass:"apm-count clearfix"},[a("span",{staticClass:"left"},[t._v(t._s(s.apmCount)+"人正在等待剪发")]),t._v(" "),a("span",{staticClass:"right"},[s.mark?a("span",{staticClass:"mark"},[t._v(t._s(s.mark))]):t._e(),t._v(" "),s.distance?a("span",[t._v(t._s(s.distance))]):t._e()])])])}))]),t._v(" "),a("mt-tab-container-item",{attrs:{id:"me"}},[a("div",{staticClass:"me-view"},[a("div",{staticClass:"hairline"},[a("div",{staticClass:"me-profile clearfix"},[a("div",{staticClass:"me-avatar"},[a("img",{attrs:{src:t.user.headimgurl,alt:"用户头像"}})]),t._v(" "),a("p",{staticClass:"me-info"},[a("span",{staticClass:"nickname"},[t._v(t._s(t.user.nickname))])])])]),t._v(" "),a("div",{staticClass:"list-block"},[a("ul",[a("li",[a("router-link",{staticClass:"item-link",attrs:{to:{name:"MyBooking"}}},[a("div",{staticClass:"item-content"},[a("div",{staticClass:"item-media"},[a("i",{staticClass:"fa fa-clock-o",attrs:{"aria-hidden":"true"}})]),t._v(" "),a("div",{staticClass:"item-inner"},[a("div",{staticClass:"item-title"},[t._v("我的预约")])])])])],1),t._v(" "),a("li",[a("router-link",{staticClass:"item-link",attrs:{to:{name:"MyTicket"}}},[a("div",{staticClass:"item-content"},[a("div",{staticClass:"item-media"},[a("i",{staticClass:"fa fa-qrcode",attrs:{"aria-hidden":"true"}})]),t._v(" "),a("div",{staticClass:"item-inner"},[a("div",{staticClass:"item-title"},[t._v("我的券码")])])])])],1),t._v(" "),a("li",[a("router-link",{staticClass:"item-link",attrs:{to:{name:"HairPhotos",params:{photos:t.user.hairPhotos||[]}}}},[a("div",{staticClass:"item-content"},[a("div",{staticClass:"item-media"},[a("i",{staticClass:"fa fa-scissors",attrs:{"aria-hidden":"true"}})]),t._v(" "),a("div",{staticClass:"item-inner"},[a("div",{staticClass:"item-title"},[t._v("我的发型")])])])])],1),t._v(" "),a("li",[a("router-link",{staticClass:"item-link",attrs:{to:{name:"Coupon"}}},[a("div",{staticClass:"item-content"},[a("div",{staticClass:"item-media"},[a("i",{staticClass:"fa fa-ticket",attrs:{"aria-hidden":"true"}})]),t._v(" "),a("div",{staticClass:"item-inner"},[a("div",{staticClass:"item-title"},[t._v("我的积分")])])])])],1)])])])])],1)],1)])},e=[],o={render:n,staticRenderFns:e};s.a=o},nb5g:function(t,s){},nhBj:function(t,s,a){"use strict";function n(t){a("wNt/")}var e=a("qmiw"),o=a("3iZw"),i=a("C7Lr"),r=n,c=i(e.a,o.a,!1,r,null,null);s.a=c.exports},nrUV:function(t,s,a){"use strict";s.a={name:"RateOK",data:function(){return{shopId:""}},mounted:function(){this.shopId=this.$route.params.shopId}}},ntA0:function(t,s,a){"use strict";var n=function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"staff-view"},[n("div",{staticClass:"shop-view-header"},[n("img",{staticClass:"shop-img",attrs:{src:a("81Lj"),alt:"门店图片"}}),t._v(" "),n("div",{staticClass:"info"},[n("h3",[t._v(t._s(t.shop.name)+" | 10:00-23:00")]),t._v(" "),n("p",{staticClass:"shopAddress"},[t._v(t._s(t.shop.address))])])]),t._v(" "),n("staff-queue",{attrs:{"shop-id":t.shopId,"cate-id":t.cateId}})],1)},e=[],o={render:n,staticRenderFns:e};s.a=o},o1hr:function(t,s,a){"use strict";s.a={name:"TicketList",props:["tickets"],data:function(){return{list:this.tickets,listEmpty:!1}},watch:{list:function(){this.listEmpty=0===this.list.length}}}},"oU+0":function(t,s,a){"use strict";function n(t){a("NyAJ")}var e=a("+xRT"),o=a("zmV6"),i=a("C7Lr"),r=n,c=i(e.a,o.a,!1,r,null,null);s.a=c.exports},oUfo:function(t,s,a){"use strict";function n(t){a("HPw3")}var e=a("5Vwv"),o=a("OyFB"),i=a("C7Lr"),r=n,c=i(e.a,o.a,!1,r,"data-v-3ee10f32",null);s.a=c.exports},pW5D:function(t,s,a){"use strict";var n=function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"tickt-list"},[t.listEmpty?n("p",{staticClass:"empty-list"},[t._v("暂时没有相关票券^_^")]):t._e(),t._v(" "),n("div",{staticClass:"ticket-list"},[n("ul",t._l(t.tickets,function(s){return n("li",{key:s.ticketId},[n("div",{staticClass:"item-content"},[n("div",{staticClass:"shop-area hairline-bottom"},[t._m(0,!0),t._v(" "),n("div",{staticClass:"shop-name"},[n("p",[n("router-link",{staticClass:"shop-link",attrs:{to:{name:"Shop",params:{id:s.shop.shopId}}}},[n("span",{staticClass:"shop-name"},[t._v(t._s(s.shop.name))]),n("span",[t._v(" "),n("i",{staticClass:"fa fa-angle-right",attrs:{"aria-hidden":"true"}})])])],1)])]),t._v(" "),n("div",{staticClass:"product-area hairline-bottom"},[n("p",[t._v("购买时间："+t._s(t._f("formatDate")(s.createTime)))]),t._v(" "),n("p",[t._v("该券可用于消费以下商品：")]),t._v(" "),n("p",{staticClass:"product-name"},[n("span",[t._v(t._s(s.product.name))])])]),t._v(" "),n("div",{staticClass:"ticket-area"},[n("p",{staticClass:"ticket-code"},[n("span",{staticClass:"name"},[t._v("密 码：")]),n("span",{staticClass:"code"},[t._v(t._s(s.ticketCode))])]),t._v(" "),n("p",{staticClass:"qrcode"},[n("img",{attrs:{src:s.qrcodeUrl,alt:"电子票二维码"}})])]),t._v(" "),s.used?n("p",{staticClass:"ticket-checked"},[n("img",{attrs:{src:a("Po1D"),alt:"已使用"}})]):t._e()])])}))])])},e=[function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"media"},[n("img",{attrs:{src:a("c1OE"),alt:"票券"}})])}],o={render:n,staticRenderFns:e};s.a=o},"ph/z":function(t,s,a){"use strict";var n=a("HzJ8"),e=a.n(n),o=a("P9l9"),i=a("9aav");s.a={name:"MyTicket",components:{TicketList:i.a},data:function(){return{selected:"1",usedTickets:[],unusedTickets:[]}},mounted:function(){var t=this,s=window._openid;Object(o.G)(s).then(function(s){var a=s.data.tickets,n=!0,o=!1,i=void 0;try{for(var r,c=e()(a);!(n=(r=c.next()).done);n=!0){var u=r.value;u.used?t.usedTickets.unshift(u):t.unusedTickets.unshift(u)}}catch(t){o=!0,i=t}finally{try{!n&&c.return&&c.return()}finally{if(o)throw i}}}).catch(function(s){console.error(s),t.$toast("获取数据失败")})}}},psZ0:function(t,s,a){"use strict";var n=function(){var t=this,s=t.$createElement;t._self._c;return t._m(0)},e=[function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"redirect-view"},[a("p",[t._v("跳转中...")])])}],o={render:n,staticRenderFns:e};s.a=o},qWKY:function(t,s,a){"use strict";function n(t){a("TT+/")}var e=a("ijHt"),o=a("/T9D"),i=a("C7Lr"),r=n,c=i(e.a,o.a,!1,r,"data-v-0c9bf422",null);s.a=c.exports},qiJ6:function(t,s){},qmiw:function(t,s,a){"use strict";var n=a("lC5x"),e=a.n(n),o=a("IHPB"),i=a.n(o),r=a("J0Oq"),c=a.n(r),u=a("HzJ8"),l=a.n(u),d=a("GO2A"),p=a("P9l9"),h=a("0xDb"),m=a("qxLr"),f=a("fBgl");s.a={name:"CouponCenter",components:{CouponList2:d.a,RatingList:m.a,CouponUserList:f.a},data:function(){return{shopId:this.$route.params.shopId,shop:{},coupons:[],userCoupons:[],ratings:[],users:[],currentCoupon:{},showMask:!1,selectedCommentList:"1",couponLoading:!0}},methods:{listCoupon:function(){var t=this;this.couponLoading=!0,this.$indicator.open({text:"正在加载...",spinnerType:"fading-circle"}),Object(p.I)().then(function(s){return t.userCoupons=s.data.coupons||[],Object(p.A)(t.shopId)}).then(function(s){t.coupons=s.data.coupons;var a=Date.now(),n=function(t){return a<t.endTimeStamp&&t.couponCount>0};t.coupons=t.coupons.filter(n),t.couponLoading=!1,t.$indicator.close(),t.handleGetCoupon(t.coupons[0])}).catch(function(s){t.couponLoading=!1,t.$indicator.close(),t.$toast("系统错误："+s.message)})},wxShare:function(){var t=this,s="http://test-shop.fanxify.com/shop-home#/redirect?view=coupon-center&shopId="+t.shopId+"&shareId=1",a="http://test-shop.fanxify.com/static/img/share-logo.jpeg";wx.ready(function(){wx.onMenuShareTimeline({title:"赞！你我身边超级好评美发店，来免费领取积分",link:s,imgUrl:a,success:function(){t.showMask=!1,t.addCoupon(),t.$toast("分享成功")},cancel:function(){t.showMask=!1}}),wx.onMenuShareAppMessage({title:"赞！你我身边超级好评美发店，来免费领取积分",desc:"众多品质客户推荐，看看有没适合我的发型",link:s,imgUrl:a,success:function(){t.showMask=!1,t.addCoupon(),t.$toast("分享成功")},cancel:function(s){t.showMask=!1}})}),wx.error(function(t){})},handleGetCoupon:function(t){if(t){var s=!0,a=!1,n=void 0;try{for(var e,o=l()(this.userCoupons);!(s=(e=o.next()).done);s=!0){if(e.value.couponId===t.couponId)return void this.$toast("你已经领用过该券，请不要重复领用")}}catch(t){a=!0,n=t}finally{try{!s&&o.return&&o.return()}finally{if(a)throw n}}this.currentCoupon=t;if(4===Object(h.g)("state").split("-").length)return void this.addCoupon();this.showMask=!0}},listCouponUser:function(){var t=this;return c()(e.a.mark(function s(){var a,n,o,r,c,u,d,h,m,f,v;return e.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,Object(p.A)(t.shopId);case 2:a=s.sent,n=a.data.coupons,o=[],r=!0,c=!1,u=void 0,s.prev=8,d=l()(n);case 10:if(r=(h=d.next()).done){s.next=20;break}return f=h.value,s.next=14,Object(p.H)(f.couponId);case 14:a=s.sent,v=a.data.users,(m=o).push.apply(m,i()(v));case 17:r=!0,s.next=10;break;case 20:s.next=26;break;case 22:s.prev=22,s.t0=s.catch(8),c=!0,u=s.t0;case 26:s.prev=26,s.prev=27,!r&&d.return&&d.return();case 29:if(s.prev=29,!c){s.next=32;break}throw u;case 32:return s.finish(29);case 33:return s.finish(26);case 34:o=o.slice(0,15),t.users=o;case 36:case"end":return s.stop()}},s,t,[[8,22,26,34],[27,,29,33]])}))()},addCoupon:function(){var t=this;Object(p.b)(this.currentCoupon.couponId).then(function(s){t.$toast("领取成功！你可以在个人中心查看你的积分，下单的时候可以使用哦！")}).catch(function(s){409===s.response.status?t.$toast("积分已经领完了"):403===s.response.status?t.$toast("你已经领过该券，还没使用哦"):t.$toast("积分不存在")})},getShopInfo:function(){var t=this;Object(p.o)(this.shopId).then(function(s){var a=s.data.shop;a.bizTime=a.bizTime?a.bizTime:"10:00-23:00",t.shop=s.data.shop}).catch(function(t){console.error(t),Toast("系统错误: "+t.message)})}},mounted:function(){var t=this.$route.params;t.shopId;"RateForm"===t.lastView&&this.$toast("评论提交成功！请分享并领取积分"),this.getShopInfo(),this.listCoupon(),this.listCouponUser(),this.wxShare()}}},qxLr:function(t,s,a){"use strict";function n(t){a("1hPO")}var e=a("CDeA"),o=a("la6D"),i=a("C7Lr"),r=n,c=i(e.a,o.a,!1,r,"data-v-2c4725e9",null);s.a=c.exports},"qzx+":function(t,s){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAMAAADDpiTIAAAC8VBMVEUAAAAA/wCA/wBVqgCAvwBmzABV1QBttgBgvwBxxgBmzABduQBqvwBixABtyABmuwBgvwBpwwBjxgBrvABmvwBhwgBoxQBkvABqvwBmwgBixABovQBkvwBqwQBmxABrvQBovwBkwQBpwwBmvQBqvwBnwQBlwwBpxABmvwBqwQBnwgBlxABovwBmwQBpwgBnwwBlvwBowQBmwgBpwwBnvwBlwABowgBmwwBnwABlwQBowgBmvwBpwABnwQBlwgBovwBmwABowQBnwgBlvwBnwABmwQBowgBnvwBlwABnwQBmwgBowwBnwABlwQBnwgBmwgBowABnwQBowgBnwgBowQBnwQBowgBnwABmwQBowQBnwgBowABnwQBmwQBowgBnwABowQBnwQBmwgBowABnwQBowQBnwgBmwABnwABmwQBowgBnwABmwABnwQBowgBnwABmwQBnwQBmwgBowABnwQBmwQBnwgBmwABowQBnwQBmwgBnwABmwQBowQBnwgBmwABnwQBmwQBowgBnwABowQBnwQBmwgBnwABnwQBowQBnwgBmwABnwQBnwQBowQBnwABmwQBnwQBnwQBowgBnwQBmwQBnwQBnwgBowABnwQBmwQBnwgBnwABowQBnwQBmwgBnwABnwQBnwgBmwABnwQBnwQBowgBnwABmwQBnwQBnwQBnwABnwQBmwQBnwQBnwABnwQBnwQBmwQBnwABnwQBnwQBowgBnwQBnwQBnwQBnwgBowQBnwQBnwQBnwgBnwQBowQBnwQBnwQBnwQBnwQBowQBnwQBnwQBnwQBnwQBnwQBnwABmwQBnwQBnwQBnwABnwQBmwQBnwQBnwABnwQBnwQBmwQBnwgBnwQBnwQBnwQBmwgBnwQBnwQBnwQBnwQBmwQBnwQBnwQBnwQBnwQBmwQBnwQBnwQBnwQBnwQBnwQBnwQBnwQBnwQBnwQBnwQBnwQBnwQBnwQBnwQBnwQBnwQBnwQBnwQBnwQBnwQBnwQArO7VoAAAA+nRSTlMAAQIDBAUGBwgJCgsMDQ4PEBESExQVFhcYGRobHB0eHyAhIiMkJSYnKCkqKywtLi8wMTIzNDU2Nzk6Ozw9Pj9AQUJDREVGR0hJSktMTU5PUFFSU1RWV1hZWltcXV5f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"},r8Ts:function(t,s){},rfDJ:function(t,s,a){"use strict";function n(t){a("OlWO")}var e=a("JPb8"),o=a("g7aJ"),i=a("C7Lr"),r=n,c=i(e.a,o.a,!1,r,null,null);s.a=c.exports},rxwI:function(t,s){},sEFh:function(t,s,a){"use strict";s.a={name:"app"}},sSRv:function(t,s){},swE8:function(t,s,a){"use strict";var n=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"rate-ok-view"},[t._m(0),t._v(" "),a("div",{staticClass:"links"},[a("router-link",{staticClass:"link-btn",attrs:{to:{name:"CouponCenter",params:{shopId:t.shopId}}}},[a("mt-button",{attrs:{size:"large",type:"primary"}},[t._v("领取门店积分")])],1),t._v(" "),a("router-link",{staticClass:"link-btn",attrs:{to:{name:"Home"}}},[a("mt-button",{attrs:{size:"large"}},[t._v("返回首页")])],1)],1)])},e=[function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"success-icon"},[a("i",{staticClass:"iconfont"},[t._v("")]),t._v(" "),a("p",[t._v("评论成功！你现在可以：")])])}],o={render:n,staticRenderFns:e};s.a=o},t7zg:function(t,s,a){"use strict";var n=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"coupon-users-view"},t._l(t.users,function(s){return a("mt-cell",{key:s.openid,attrs:{title:s.nickname}},[a("span",[t._v("领取了积分券")]),t._v(" "),a("img",{attrs:{slot:"icon",src:s.headimgurl,width:"24",height:"24"},slot:"icon"})])}))},e=[],o={render:n,staticRenderFns:e};s.a=o},tBjl:function(t,s,a){"use strict";var n=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"pay-ok-view"},[t._m(0),t._v(" "),a("div",{staticClass:"links"},[a("router-link",{staticClass:"link-btn",attrs:{to:{name:"CouponCenter",params:{shopId:t.shopId}}}},[a("mt-button",{attrs:{size:"large",type:"primary"}},[t._v("领取门店积分")])],1),t._v(" "),a("router-link",{staticClass:"link-btn",attrs:{to:{name:"MyOrder"}}},[a("mt-button",{attrs:{size:"large"}},[t._v("查看订单")])],1),t._v(" "),a("router-link",{staticClass:"link-btn",attrs:{to:{name:"MyTicket"}}},[a("mt-button",{attrs:{size:"large"}},[t._v("立即使用")])],1),t._v(" "),a("router-link",{staticClass:"link-btn",attrs:{to:{name:"Home"}}},[a("mt-button",{attrs:{size:"large"}},[t._v("返回首页")])],1)],1)])},e=[function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"success-icon"},[n("img",{attrs:{src:a("qzx+"),alt:"购买成功"}}),t._v(" "),n("p",[t._v("购买成功！你现在可以：")])])}],o={render:n,staticRenderFns:e};s.a=o},tXCO:function(t,s){},teim:function(t,s,a){"use strict";function n(t){a("xb9J")}var e=a("DlVV"),o=a("Q5ZX"),i=a("C7Lr"),r=n,c=i(e.a,o.a,!1,r,"data-v-5d96aaf3",null);s.a=c.exports},tthf:function(t,s){},tuqB:function(t,s,a){t.exports=a.p+"static/img/m-fx-2.93d20a9.png"},u1zd:function(t,s,a){t.exports=a.p+"static/img/share-guide.000f9bc.jpeg"},ua79:function(t,s,a){"use strict";var n=a("lC5x"),e=a.n(n),o=a("J0Oq"),i=a.n(o),r=a("wSez"),c=(a.n(r),a("P9l9")),u=a("yohg"),l=a("0xDb");s.a={props:["shopId","prodId"],name:"Order",data:function(){return{total:0,shop:{},product:{photos:[]},popupVisible:!1,prodCount:0,orderId:"123",price:0,coupons:[],couponIds:[],choosedCoupon:{couponAmount:0,couponIds:[]}}},watch:{couponIds:function(t,s){var a=this;t!==s&&(0===t.length?this.choosedCoupon={couponAmount:0,couponIds:[]}:(this.choosedCoupon.couponIds=t,this.choosedCoupon.couponAmount=0,t.map(function(t){var s=a.coupons.find(function(s){return s.couponId===t});a.choosedCoupon.couponAmount+=100*Number(s.couponAmount)}))),this.total=this.getTotalFee()}},methods:{confirmCoupon:function(){this.total=this.getTotalFee(),this.popupVisible=!1},showPopup:function(){this.popupVisible=!0},submitOrder:function(){var t=this,s={total:this.getTotalFee(),oriTotal:Number(this.prodCount)*Number(this.price)*100,thumbnail:this.product.photos[0],prodId:this.product.prodId,prodCount:this.prodCount,shopId:this.shop.shopId,couponIds:this.couponIds};if(u.a)this.$router.push({name:"Pay",params:{orderId:"2333"}});else{var a=Object(r.Toast)({message:"正在创建订单...",duration:-1});Object(c.d)(s).then(function(s){a.close();var n=s.data.order;t.orderId=n.orderId,t.$router.push({name:"Pay",params:{orderId:t.orderId}})}).catch(function(t){a.close(),Object(r.Toast)("创建订单失败，请重试！")})}},getTotalFee:function(){var t=Number(this.prodCount),s=100*Number(this.price),a=this.choosedCoupon.couponAmount,n=t*s-a;return n=n<1?0:n,parseInt(n)},handleCoupon:function(){var t=this;return i()(e.a.mark(function s(){return e.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:Object(c.h)({openid:Object(l.f)(),product:t.product,shopId:t.shop.shopId}).then(function(s){t.coupons=s.data.coupons,t.coupons.map(function(t){t.label=t.couponName,t.value=t.couponId}),t.choosedCoupon=t.coupons.length>0?{couponAmount:t.coupons[0].couponAmount,couponIds:[t.coupons[0].couponId]}:{couponAmount:0,couponIds:[]},t.couponIds=t.choosedCoupon.couponIds});case 1:case"end":return s.stop()}},s,t)}))()}},mounted:function(){var t=this;return i()(e.a.mark(function s(){return e.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:t.prodCount=t.$route.query.count,t.price=t.$route.query.price,t.prodId=t.$route.params.prodId,Object(c.n)(t.prodId).then(function(s){var a=s.data.product;t.product=a,t.shop=a.shop,t.handleCoupon(),t.total=t.getTotalFee()}).catch(function(t){console.error(t),Object(r.Toast)("系统错误")});case 4:case"end":return s.stop()}},s,t)}))()}}},uugx:function(t,s){},vBpR:function(t,s,a){"use strict";function n(t){a("tthf"),a("kay0")}var e=a("N3Zs"),o=a("ntA0"),i=a("C7Lr"),r=n,c=i(e.a,o.a,!1,r,"data-v-36a9b28c",null);s.a=c.exports},vDqC:function(t,s,a){"use strict";function n(t){a("Ulsu")}var e=a("RMUb"),o=a("f0vK"),i=a("C7Lr"),r=n,c=i(e.a,o.a,!1,r,"data-v-7eabfb5c",null);s.a=c.exports},wA6P:function(t,s,a){"use strict";function n(t){a("BbNH")}var e=a("3CHL"),o=a("fbG9"),i=a("C7Lr"),r=n,c=i(e.a,o.a,!1,r,null,null);s.a=c.exports},wGUj:function(t,s,a){"use strict";var n=function(){var t=this,s=t.$createElement;return(t._self._c||s)("div")},e=[],o={render:n,staticRenderFns:e};s.a=o},"wNt/":function(t,s){},wX5r:function(t,s,a){"use strict";var n=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"product-group-view"},[0===t.prodGroups.length?a("p",{staticClass:"no-prod-tip"},[t._v("\n    暂时没有相关商品^_^\n  ")]):t._e(),t._v(" "),a("el-collapse",{on:{change:t.handleCollapse},model:{value:t.activeGroups,callback:function(s){t.activeGroups=s},expression:"activeGroups"}},t._l(t.prodGroups,function(s){return a("el-collapse-item",{key:s.groupId,attrs:{title:s.name,name:s.groupId}},[a("ul",t._l(s.products,function(s){return a("li",{key:s.prodId,staticClass:"group-product-item"},[a("router-link",{staticClass:"item-content-link",attrs:{to:{name:"Product",params:{shopId:t.$route.params.shopId,prodId:s.prodId}}}},[a("div",{staticClass:"media"},[a("div",{staticClass:"media-left"},[a("img",{staticClass:"media-object prod-img",attrs:{src:s.photos[0],alt:"产品图片"}})]),t._v(" "),a("div",{staticClass:"media-body"},[a("p",{staticClass:"title"},[t._v(t._s(s.name))]),t._v(" "),a("p",{staticClass:"price"},[a("span",{staticClass:"symbol"},[t._v("￥")]),a("span",{staticClass:"num"},[t._v(t._s(s.price))])]),t._v(" "),s.desc?a("p",{staticClass:"desc"},[t._v(t._s(s.desc))]):t._e()])])])],1)}))])}))],1)},e=[],o={render:n,staticRenderFns:e};s.a=o},xb9J:function(t,s){},y0Je:function(t,s,a){"use strict";a.d(s,"a",function(){return n});var n={WAITING:0,SERVING:1,DONE:2,CANCEL:3}},y1Td:function(t,s,a){"use strict";function n(t){a("QpKM")}var e=a("LUG1"),o=a("15+l"),i=a("C7Lr"),r=n,c=i(e.a,o.a,!1,r,null,null);s.a=c.exports},yk9H:function(t,s,a){"use strict";function n(t){a("ZcqZ")}var e=a("f2H6"),o=a("U0kQ"),i=a("C7Lr"),r=n,c=i(e.a,o.a,!1,r,"data-v-0d31b6c0",null);s.a=c.exports},yohg:function(t,s,a){"use strict";a.d(s,"a",function(){return n}),a.d(s,"b",function(){return e});var n=!1,e=9e5},"zAY/":function(t,s,a){"use strict";function n(t){a("jxTG")}var e=a("KX3k"),o=a("4rA0"),i=a("C7Lr"),r=n,c=i(e.a,o.a,!1,r,"data-v-b4e35afa",null);s.a=c.exports},zSz4:function(t,s,a){t.exports=a.p+"static/img/wm-fx-1.e75011d.jpg"},zmV6:function(t,s,a){"use strict";var n=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"pay-view"},[a("div",{staticClass:"pay-count hairline-bottom"},[a("p",[t._v("需付："),a("span",[t._v("￥"+t._s(t._f("yuan")(t.order.total)))])])]),t._v(" "),a("div",{staticClass:"count-down"},[a("countdown",{ref:"countdown",attrs:{"auto-start":!1,time:t.orderTTL},scopedSlots:t._u([{key:"default",fn:function(s){return[t._v("请在十五分钟内支付订单。剩余时间："),a("span",{staticClass:"time-left"},[t._v(t._s(s.minutes)+":"+t._s(s.seconds))])]}}])})],1),t._v(" "),a("div",{staticClass:"wx-pay-btn-wrap"},[a("a",{staticClass:"wx-pay-btn",attrs:{href:"javascript:;"},on:{click:t.handleWxPay}},[t._v("微信支付")])])])},e=[],o={render:n,staticRenderFns:e};s.a=o}},["NHnr"]);
//# sourceMappingURL=app.f08ddfbf93ae9127dda4.js.map